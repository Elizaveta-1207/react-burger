{"version":3,"sources":["components/App/App.module.css","components/IngredientsContainer/IngredientsContainer.module.css","components/Counter/Counter.module.css","components/ModalOverlay/ModalOverlay.module.css","components/BurgerConstructor/BurgerConstructor.module.css","pages/Profile/Profile.module.css","services/hooks.ts","components/AppHeader/AppHeader.tsx","components/Counter/Counter.tsx","components/Ingredient/Ingredient.tsx","components/IngredientsContainer/IngredientsContainer.tsx","components/BurgerIngredients/BurgerIngredients.tsx","services/actions/user.ts","utils/constants.ts","services/actions/order.ts","services/actions/burgerConstructor.ts","components/DraggableIngredient/DraggableIngredient.tsx","components/BurgerConstructor/BurgerConstructor.tsx","components/ModalOverlay/ModalOverlay.tsx","components/Modal/Modal.tsx","components/IngredientDetails/IngredientDetails.tsx","images/done.gif","components/OrderDetails/OrderDetails.tsx","services/actions/burgerIngredients.tsx","pages/Login/Login.tsx","pages/Register/Register.tsx","pages/ForgotPassword/ForgotPassword.tsx","pages/ResetPassword/ResetPassword.tsx","components/OrderCard/OrderCard.tsx","services/types.ts","pages/Profile/Profile.tsx","pages/Feed/Feed.tsx","pages/FeedDetails/FeedDetails.tsx","components/ProtectedRoute/ProtectedRoute.tsx","components/App/App.tsx","reportWebVitals.ts","services/reducers/burgerIngredients.ts","services/reducers/burgerConstructor.ts","services/reducers/order.ts","services/reducers/user.ts","services/reducers/orders.ts","services/reducers/index.ts","services/actions/orders.ts","index.tsx","services/middlewares/socketMiddleware.ts","pages/Feed/Feed.module.css","components/OrderCard/OrderCard.module.css","components/IngredientDetails/IngredientDetails.module.css","components/AppHeader/AppHeader.module.css","components/Ingredient/Ingredient.module.css","pages/Login/Login.module.css","components/BurgerIngredients/BurgerIngredients.module.css","components/OrderDetails/OrderDetails.module.css","pages/Register/Register.module.css","pages/ForgotPassword/ForgotPassword.module.css","pages/ResetPassword/ResetPassword.module.css","pages/FeedDetails/FeedDetails.module.css","components/Modal/Modal.module.css"],"names":["module","exports","useSelector","selectorHook","useDispatch","dispatchHook","AppHeader","pathname","useLocation","className","appHeader","header","container","nav","exact","to","navBtn","type","Counter","amount","counter","circle","Ingredient","_id","image","price","name","history","useHistory","location","state","burgerConstructor","constructorBuns","constructorIngredients","buns","burgerIngredients","ingredients","filter","item","ingredientAmount","useMemo","forEach","bunsAmount","length","useDrag","collect","monitor","opacity","isDragging","dragRef","ingredient","onClick","replace","backIngredient","ref","style","src","alt","priceValue","IngredientsContainer","title","ingredientsContainer","map","proteins","fat","carbohydrates","calories","BurgerIngredients","data","useState","currentTab","setCurrentTab","tabsRef","useRef","bunsRef","saucesRef","mainRef","sauces","main","handleTabClick","current","scrollIntoView","behavior","typeArr","refName","value","active","ingredientsBlock","onScroll","tabsTop","getBoundingClientRect","top","bunsTop","saucesTop","mainTop","bunsDistance","Math","abs","saucesDistance","mainDistance","minValue","min","i","REGISTER_REQUEST","REGISTER_SUCCESS","REGISTER_FAILED","AUTH_REQUEST","AUTH_SUCCESS","AUTH_FAILED","LOGOUT_REQUEST","LOGOUT_SUCCESS","LOGOUT_FAILED","GET_USER_REQUEST","GET_USER_SUCCESS","GET_USER_FAILED","USER_UPDATE_REQUEST","USER_UPDATE_SUCCESS","USER_UPDATE_FAILED","refresh","refreshToken","getCookie","fetch","BASE_API_URL","method","headers","body","JSON","stringify","token","then","res","ok","json","err","Promise","reject","login","email","password","dispatch","success","accessToken","split","setCookies","user","payload","push","catch","WS_URL","emailRegex","matches","document","cookie","match","RegExp","decodeURIComponent","undefined","props","exp","path","expires","d","Date","setTime","getTime","toUTCString","updatedCookie","encodeURIComponent","propName","propValue","retriableFetch","url","options","a","message","refreshTokens","authorization","getDate","date","currentDate","slice","toISOString","deleteCookies","GET_ORDER_REQUEST","GET_ORDER_SUCCESS","GET_ORDER_ERROR","RESET_ORDER","getOrder","itemsId","order","number","ADD_CONSTRUCTOR_INGREDIENT","DELETE_CONSTRUCTOR_INGREDIENT","INCREASE_CONSTRUCTOR_AMOUNT","DECREASE_CONSTRUCTOR_AMOUNT","ADD_CONSTRUCTOR_BUN","MOVE_CONSTRUCTOR_INGREDIENTS","increaseConstructorAmount","decreaseConstructorAmount","DraggableIngredient","children","index","useDrop","accept","hover","dragIndex","hoverIndex","hoverBoundingRect","hoverMiddleY","bottom","hoverClientY","getClientOffset","y","moveConstructorIngredients","drop","drag","BurgerConstructor","onModalOpen","isAuth","dataIngredients","bunsPrice","sum","fullPrice","handleDeleteIngredient","key","deleteConstructorIngredient","isHover","isOver","uniqueId","trunc","random","addConstructorBun","addConstructorIngredient","dropRef","id","block","block_hovered","elem","isLocked","text","thumbnail","list","handleClose","empty","sumBlock","sumValue","btn_disabled","size","ingredientsId","disabled","ModalOverlay","onModalClose","modalOverlay","e","target","currentTarget","modalRoot","getElementById","Modal","modalType","closeEsc","code","React","useEffect","addEventListener","removeEventListener","ReactDOM","createPortal","modal","justifyContent","close","IngredientDetails","useParams","ingredientsData","isIngredientsLoaded","currentIngredient","find","ingredientDetails","height","textAlign","details","detail","OrderDetails","orderNumber","isOrderLoading","orderDetails","orderId","orderIdText","done","GET_BURGER_INGREDIENTS_REQUEST","GET_BURGER_INGREDIENTS_SUCCESS","GET_BURGER_INGREDIENTS_ERROR","getBurgerIngredientsError","getBurgerIngredients","Login","getUserRequest","setEmail","setPassword","onChange","from","loginStyle","onSubmit","preventDefault","noValidate","form","info","link","Register","errorText","registerError","username","setUsername","emailError","setEmailError","registerStyle","register","placeholder","error","color","ForgotPassword","forgotPassword","forgotPageVisited","ResetPassword","showPassword","setShowPassword","setCode","classList","resetPassword","alert","icon","onIconClick","OrderCard","orderSum","prop","ingredientsInOrder","ingredientsOrder","result","element","unshift","image_mobile","ingredientsInfo","uniqueIngredientsInOrder","reduce","unique","includes","slicedIngredients","reverse","orderCard","card","backFeed","backProfile","orderAndDate","createdAt","display","alignItems","imgBlock","img","marginRight","position","extra","WS_CONNECTION_START","WS_CONNECTION_SUCCESS","WS_CONNECTION_ERROR","WS_CONNECTION_CLOSED","WS_GET_MESSAGE","Profile","orders","setName","profile","navBar","navLink","activeClassName","activeNavLink","navText","profileBlock","width","Authorization","updateUser","ordersBlock","updatedAt","status","Feed","total","totalToday","doneOrders","pendingOrders","feed","ordersInfo","ordersNumbers","ordersReady","orderNumberReady","ordersInWork","largeNumber","FeedDetails","orderPrice","feedDetails","priceAndDate","ProtectedRoute","rest","render","App","showModal","setShowModal","setModalType","handleCloseModal","handleOpenModalOrder","useCallback","app","DndProvider","backend","HTML5Backend","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","isIngredientsLoading","isIngredientsGetFailed","constructorAmount","isOrderGetFailed","registerRequest","authRequest","authError","logoutRequest","logoutError","getUserError","getUserLoaded","userUpdateRequest","userUpdateError","ordersAllRequest","ordersAllFailed","wsConnected","rootReducer","combineReducers","action","newConstructorIngredients","splice","wsActions","wsInit","onOpen","onClose","onError","onMessage","enhancer","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","thunk","store","socket","next","getState","WebSocket","onopen","event","onerror","onclose","onmessage","parse","socketMiddleware","createStore","StrictMode"],"mappings":"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","file":"static/js/main.8d32f56e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"App_main__3epDF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"IngredientsContainer_container__1L1gA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"circle\":\"Counter_circle__2YgUo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ModalOverlay_container__3BK1i\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"BurgerConstructor_container__3AYG7\",\"block\":\"BurgerConstructor_block__1xOds\",\"block_hovered\":\"BurgerConstructor_block_hovered__2O0hv\",\"list\":\"BurgerConstructor_list__h6Ja7\",\"sumBlock\":\"BurgerConstructor_sumBlock__2SBRY\",\"sum\":\"BurgerConstructor_sum__1LLJo\",\"ingredients\":\"BurgerConstructor_ingredients__GiCz4\",\"elem\":\"BurgerConstructor_elem__fCOAl\",\"empty\":\"BurgerConstructor_empty__13LqY\",\"btn_disabled\":\"BurgerConstructor_btn_disabled__30C4C\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"block\":\"Profile_block__F9bzc\",\"nav\":\"Profile_nav__3tXDM\",\"navBar\":\"Profile_navBar__20ME6\",\"navLink\":\"Profile_navLink__2-KB4\",\"activeNavLink\":\"Profile_activeNavLink__11WxI\",\"navText\":\"Profile_navText__2fOSP\",\"profileBlock\":\"Profile_profileBlock__26GYe\",\"ordersBlock\":\"Profile_ordersBlock__1q0wI\"};","import { TypedUseSelectorHook, useSelector as selectorHook, useDispatch as dispatchHook } from 'react-redux';\r\nimport { RootState, AppThunk, AppDispatch } from './reducers';\r\n\r\nexport const useSelector: TypedUseSelectorHook<RootState> = selectorHook;\r\nexport const useDispatch = () => dispatchHook<AppDispatch | AppThunk>();\r\n","import React from 'react';\r\nimport { Link, NavLink, useLocation } from 'react-router-dom';\r\nimport {\r\n  Logo,\r\n  BurgerIcon,\r\n  ListIcon,\r\n  ProfileIcon,\r\n} from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport appHeader from './AppHeader.module.css';\r\n\r\nfunction AppHeader() {\r\n  const { pathname } = useLocation<any>();\r\n  return (\r\n    <header className={`${appHeader.header} p-4`}>\r\n      <div className={`${appHeader.container}`}>\r\n        <nav className={`${appHeader.nav}`}>\r\n          <NavLink exact to='/' className={`${appHeader.navBtn} mr-2`}>\r\n            <BurgerIcon type={`${pathname === '/' ? 'primary' : 'secondary'}`} />\r\n            <p\r\n              className={`text text_type_main-default pl-2 mr-5 ${\r\n                pathname === '/' ? '' : 'text_color_inactive'\r\n              }`}\r\n            >\r\n              Конструктор\r\n            </p>\r\n          </NavLink>\r\n          <NavLink to='/feed' className={`${appHeader.navBtn} ml-5`}>\r\n            <ListIcon type={`${pathname === '/feed' ? 'primary' : 'secondary'}`} />\r\n            <p\r\n              className={`text text_type_main-default pl-2 mr-5 ${\r\n                pathname === '/feed' ? '' : 'text_color_inactive'\r\n              }`}\r\n            >\r\n              Лента заказов\r\n            </p>\r\n          </NavLink>\r\n        </nav>\r\n        <Link to='/'>\r\n          <Logo />\r\n        </Link>\r\n\r\n        <NavLink to='/profile' className={`${appHeader.navBtn} ml-5`}>\r\n          <ProfileIcon type={`${pathname === '/profile' ? 'primary' : 'secondary'}`} />\r\n          <p\r\n            className={`text text_type_main-default pl-2 ${\r\n              pathname === '/profile' ? '' : 'text_color_inactive'\r\n            }`}\r\n          >\r\n            Личный кабинет\r\n          </p>\r\n        </NavLink>\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default AppHeader;\r\n","import React from 'react';\r\nimport counter from './Counter.module.css';\r\n\r\ntype TCount = { amount: number };\r\n\r\nfunction Counter({ amount }: TCount) {\r\n  return (\r\n    <>\r\n      {amount > 0 ? (\r\n        <div className={counter.circle}>\r\n          <p className='text text_type_digits-default'>{amount}</p>\r\n        </div>\r\n      ) : null}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Counter;\r\n","import React, { useMemo } from 'react';\r\nimport { useSelector } from '../../services/hooks';\r\nimport { useHistory, useLocation } from 'react-router-dom';\r\nimport { useDrag } from 'react-dnd';\r\nimport ingredient from './Ingredient.module.css';\r\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport Counter from '../Counter/Counter';\r\nimport { RootState } from '../../services/reducers';\r\nimport { TIngredientType, TBurgerConstructorType, TBurgerIngredientsType } from '../../utils/types';\r\n\r\nfunction Ingredient({ _id, type, image, price, name }: TIngredientType) {\r\n  const history = useHistory();\r\n  const location = useLocation<any>();\r\n\r\n  const handleClick = () => {\r\n    history.replace({\r\n      pathname: `/ingredients/${_id}`,\r\n      state: { backIngredient: location },\r\n    });\r\n  };\r\n\r\n  const { constructorBuns, constructorIngredients } = useSelector(\r\n    (state) => state.burgerConstructor,\r\n  );\r\n\r\n  const dataIngredients = useSelector((state) => state.burgerIngredients.ingredients);\r\n  const buns = dataIngredients!.filter((item) => item.type === 'bun');\r\n\r\n  const ingredientAmount = useMemo(() => {\r\n    let amount = 0;\r\n    constructorIngredients.forEach((item) => {\r\n      if (item._id === _id) amount = amount + 1;\r\n    });\r\n    return amount;\r\n  }, [constructorIngredients, _id]);\r\n\r\n  const bunsAmount = useMemo(() => {\r\n    let amount = 0;\r\n    if (constructorBuns || constructorIngredients.length > 0) {\r\n      if (constructorBuns) {\r\n        return constructorBuns._id === _id ? 2 : 0;\r\n      } else {\r\n        return buns[0]._id === _id ? 2 : 0;\r\n      }\r\n    } else {\r\n      return amount;\r\n    }\r\n  }, [constructorBuns, constructorIngredients, buns, _id]);\r\n\r\n  const [{ opacity }, dragRef] = useDrag({\r\n    type: 'ingredient',\r\n    item: { _id: _id, name: name, type: type, image: image, price: price },\r\n    collect: (monitor) => ({\r\n      opacity: monitor.isDragging() ? 0.2 : 1,\r\n    }),\r\n  });\r\n\r\n  return (\r\n    <div\r\n      className={`${ingredient.container} mb-8`}\r\n      onClick={handleClick}\r\n      ref={dragRef}\r\n      style={{ opacity: `${opacity}` }}\r\n    >\r\n      <Counter amount={type === 'bun' ? bunsAmount : ingredientAmount} />\r\n      <img src={image} alt='burger-ingredient' className={`${ingredient.image} pl-4 pr-4`} />\r\n      <div className={`${ingredient.price} mt-1`}>\r\n        <p className={`text text_type_digits-default ${ingredient.priceValue}`}>{price}</p>\r\n        <CurrencyIcon type='primary' />\r\n      </div>\r\n      <p className={`text text_type_main-default ${ingredient.name} mt-1`}>{name}</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Ingredient;\r\n","import React from 'react';\r\nimport ingredientsContainer from './IngredientsContainer.module.css';\r\nimport Ingredient from '../Ingredient/Ingredient';\r\nimport { TIngredientType } from '../../utils/types';\r\n\r\ntype TIngredientsContainer = {\r\n  ingredients: TIngredientType[];\r\n  title: string;\r\n};\r\n\r\nfunction IngredientsContainer({ title, ingredients }: TIngredientsContainer) {\r\n  return (\r\n    <div className={`mb-10`}>\r\n      <p className={`text text_type_main-medium mb-6`}>{title}</p>\r\n      <div className={`${ingredientsContainer.container} pl-4 pr-4`}>\r\n        {ingredients.map((item) => (\r\n          <Ingredient\r\n            // key={item.key}\r\n            key={item._id}\r\n            _id={item._id}\r\n            type={item.type}\r\n            image={item.image}\r\n            price={item.price}\r\n            name={item.name}\r\n            proteins={item.proteins}\r\n            fat={item.fat}\r\n            carbohydrates={item.carbohydrates}\r\n            calories={item.calories}\r\n          />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default IngredientsContainer;\r\n","import React, { useRef, useState } from 'react';\r\nimport { useSelector } from '../../services/hooks';\r\nimport { Tab } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport burgerIngredients from './BurgerIngredients.module.css';\r\nimport IngredientsContainer from '../IngredientsContainer/IngredientsContainer';\r\nimport { RootState } from '../../services/reducers';\r\nimport { TBurgerIngredientsType } from '../../utils/types';\r\n\r\nfunction BurgerIngredients() {\r\n  const data = useSelector((state) => state.burgerIngredients.ingredients);\r\n\r\n  const [currentTab, setCurrentTab] = useState('bun');\r\n\r\n  const tabsRef = useRef<HTMLDivElement>(null);\r\n  const bunsRef = useRef<HTMLDivElement>(null);\r\n  const saucesRef = useRef<HTMLDivElement>(null);\r\n  const mainRef = useRef<HTMLDivElement>(null);\r\n\r\n  const buns = data!.filter((item) => item.type === 'bun');\r\n  const sauces = data!.filter((item) => item.type === 'sauce');\r\n  const main = data!.filter((item) => item.type === 'main');\r\n\r\n  const getTab = () => {\r\n    // верх табов\r\n    const tabsTop = tabsRef.current?.getBoundingClientRect().top ?? 0;\r\n\r\n    // каждый блок верх\r\n    const bunsTop = bunsRef.current?.getBoundingClientRect().top ?? 0;\r\n    const saucesTop = saucesRef.current?.getBoundingClientRect().top ?? 0;\r\n    const mainTop = mainRef.current?.getBoundingClientRect().top ?? 0;\r\n    // расстояние от верхушки табов до верхушки каждого блока с ингридиентами\r\n    const bunsDistance = Math.abs(tabsTop - bunsTop);\r\n    const saucesDistance = Math.abs(tabsTop - saucesTop);\r\n    const mainDistance = Math.abs(tabsTop - mainTop);\r\n\r\n    // минимальное расстояние от верхушки табов до блока с ингридиентами\r\n    const minValue = Math.min(bunsDistance, saucesDistance, mainDistance);\r\n\r\n    if (minValue === bunsDistance) {\r\n      setCurrentTab('bun');\r\n    } else if (minValue === saucesDistance) {\r\n      setCurrentTab('sauce');\r\n    } else {\r\n      setCurrentTab('main');\r\n    }\r\n  };\r\n\r\n  // реализация скролла при нажатии на таб\r\n  const handleTabClick = (currentTab: string) => {\r\n    setCurrentTab(currentTab);\r\n    currentTab === 'bun' && bunsRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n    currentTab === 'sauce' && saucesRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n    currentTab === 'main' && mainRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  };\r\n\r\n  // массив видов ингридиентов\r\n  const typeArr = [\r\n    { title: 'Булки', ingredients: buns, refName: bunsRef },\r\n    { title: 'Соусы', ingredients: sauces, refName: saucesRef },\r\n    { title: 'Начинки', ingredients: main, refName: mainRef },\r\n  ];\r\n\r\n  return (\r\n    <div className={`${burgerIngredients.container} mr-10`}>\r\n      <p className={`${burgerIngredients.title} text text_type_main-large mt-10 mb-5`}>\r\n        Соберите бургер\r\n      </p>\r\n      <div className={`${burgerIngredients.nav}`} ref={tabsRef}>\r\n        <Tab value='bun' active={currentTab === 'bun'} onClick={() => handleTabClick('bun')}>\r\n          Булки\r\n        </Tab>\r\n        <Tab value='sauce' active={currentTab === 'sauce'} onClick={() => handleTabClick('sauce')}>\r\n          Соусы\r\n        </Tab>\r\n        <Tab value='main' active={currentTab === 'main'} onClick={() => handleTabClick('main')}>\r\n          Начинки\r\n        </Tab>\r\n      </div>\r\n      <div className={`${burgerIngredients.ingredientsBlock} mt-10`} onScroll={getTab}>\r\n        {typeArr.map((item, i) => (\r\n          <div ref={item.refName} key={i}>\r\n            <IngredientsContainer title={item.title} ingredients={item.ingredients} />\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default BurgerIngredients;\r\n","import { BASE_API_URL, setCookies, getCookie, retriableFetch, deleteCookies } from '../../utils/constants';\r\nimport { AppThunk, AppDispatch } from '../reducers';\r\nimport { TRes, TUser, TRefresh } from '../../utils/types';\r\n\r\nexport const REGISTER_REQUEST = 'REGISTER_REQUEST';\r\nexport const REGISTER_SUCCESS = 'REGISTER_SUCCESS';\r\nexport const REGISTER_FAILED = 'REGISTER_FAILED';\r\n\r\nexport const AUTH_REQUEST = 'AUTH_REQUEST';\r\nexport const AUTH_SUCCESS = 'AUTH_SUCCESS';\r\nexport const AUTH_FAILED = 'AUTH_FAILED';\r\n\r\nexport const LOGOUT_REQUEST = 'LOGOUT_REQUEST';\r\nexport const LOGOUT_SUCCESS = 'LOGOUT_SUCCESS';\r\nexport const LOGOUT_FAILED = 'LOGOUT_FAILED';\r\n\r\nexport const GET_USER_REQUEST = 'GET_USER_REQUEST';\r\nexport const GET_USER_SUCCESS = 'GET_USER_SUCCESS';\r\nexport const GET_USER_FAILED = 'GET_USER_FAILED';\r\n\r\nexport const USER_UPDATE_REQUEST = 'USER_UPDATE_REQUEST';\r\nexport const USER_UPDATE_SUCCESS = 'USER_UPDATE_SUCCESS';\r\nexport const USER_UPDATE_FAILED = 'USER_UPDATE_FAILED';\r\n\r\ntype TRegisterActionRequest = { readonly type: typeof REGISTER_REQUEST };\r\ntype TRegisterActionSuccess = { readonly type: typeof REGISTER_SUCCESS };\r\ntype TRegisterActionFailed = { readonly type: typeof REGISTER_FAILED };\r\n\r\ntype TLoginActionRequest = { readonly type: typeof AUTH_REQUEST };\r\ntype TLoginActionSuccess = { readonly type: typeof AUTH_SUCCESS; readonly payload: TUser | undefined };\r\ntype TLoginActionFailed = { readonly type: typeof AUTH_FAILED };\r\n\r\ntype TLogoutActionRequest = { readonly type: typeof LOGOUT_REQUEST };\r\ntype TLogoutActionSuccess = { readonly type: typeof LOGOUT_SUCCESS };\r\ntype TLogoutActionFailed = { readonly type: typeof LOGOUT_FAILED };\r\n\r\ntype TGetUserActionRequest = { readonly type: typeof GET_USER_REQUEST };\r\ntype TGetUserActionSuccess = { readonly type: typeof GET_USER_SUCCESS; payload: TUser | undefined };\r\ntype TGetUserActionFailed = { readonly type: typeof GET_USER_FAILED };\r\n\r\ntype TUpdateUserActionRequest = { readonly type: typeof USER_UPDATE_REQUEST };\r\ntype TUpdateUserActionSuccess = { readonly type: typeof USER_UPDATE_SUCCESS; payload: TUser | undefined };\r\ntype TUpdateUserActionFailed = { readonly type: typeof USER_UPDATE_FAILED };\r\n\r\nexport type TUserActions =\r\n  | TRegisterActionRequest\r\n  | TRegisterActionSuccess\r\n  | TRegisterActionFailed\r\n  | TLoginActionRequest\r\n  | TLoginActionSuccess\r\n  | TLoginActionFailed\r\n  | TLogoutActionRequest\r\n  | TLogoutActionSuccess\r\n  | TLogoutActionFailed\r\n  | TGetUserActionRequest\r\n  | TGetUserActionSuccess\r\n  | TGetUserActionFailed\r\n  | TUpdateUserActionRequest\r\n  | TUpdateUserActionSuccess\r\n  | TUpdateUserActionFailed;\r\n\r\n  const loginSuccess = (user: TUser): TLoginActionSuccess => {\r\n\treturn { type: AUTH_SUCCESS, payload: user };\r\n  };\r\n\r\n  const loginFailed = (): TLoginActionFailed => {\r\n\treturn { type: AUTH_FAILED };\r\n  };\r\n\r\n\r\nexport const register: AppThunk = ({ email, password, name, history }) => {\r\n  return (dispatch) => {\r\n    dispatch({\r\n      type: REGISTER_REQUEST,\r\n    });\r\n    fetch(`${BASE_API_URL}/auth/register`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-type': 'application/json',\r\n      },\r\n      body: JSON.stringify({ email: email, password: password, name: name }),\r\n    })\r\n      .then((res) => {\r\n\t\tif (res.ok) return res.json();\r\n\t\telse return res.json().then((err) => Promise.reject(err));\r\n\t  })\r\n      .then((res) => {\r\n        if (res.success) {\r\n          dispatch({ type: REGISTER_SUCCESS });\r\n          history.push('/login');\r\n        } else Promise.reject(res);\r\n      })\r\n      .catch(() => dispatch({ type: REGISTER_FAILED }));\r\n  };\r\n};\r\n\r\nexport const refresh = (): Promise<TRefresh> => {\r\n  const refreshToken = getCookie('refreshToken');\r\n  return fetch(`${BASE_API_URL}/auth/token`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-type': 'application/json',\r\n    },\r\n    body: JSON.stringify({ token: `${refreshToken}` }),\r\n  }).then((res) => {\r\n\tif (res.ok) return res.json();\r\n\telse return res.json().then((err) => Promise.reject(err));\r\n  });\r\n};\r\n\r\nexport const getUser: AppThunk = () => (dispatch: AppDispatch) =>{\r\n  const accessToken = getCookie('accessToken');\r\n\r\n    dispatch({ type: GET_USER_REQUEST });\r\n    retriableFetch<TRes>(`${BASE_API_URL}/auth/user`, {\r\n      headers: {\r\n        'Content-type': 'application/json',\r\n        Authorization: `Bearer ${accessToken}`,\r\n      }}\r\n    )\r\n      .then((res) => {\r\n        if (res.success) dispatch({ type: GET_USER_SUCCESS, payload: res.user });\r\n        else Promise.reject(res);\r\n      })\r\n      .catch(() => dispatch({ type: GET_USER_FAILED }));\r\n  \r\n};\r\n\r\nexport const updateUser: AppThunk = ({ email, password, name }) => (dispatch: AppDispatch) =>{\r\n  const accessToken = getCookie('accessToken');\r\n\r\n    dispatch({ type: USER_UPDATE_REQUEST });\r\n    retriableFetch<TRes>(`${BASE_API_URL}/auth/user`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        'Content-type': 'application/json',\r\n        Authorization: `Bearer ${accessToken}`,\r\n      },\r\n      body: JSON.stringify({ email: email, password: password, name: name }),\r\n    })\r\n      .then((res) => {\r\n        if (res.success) dispatch({ type: USER_UPDATE_SUCCESS, payload: res.user });\r\n        else Promise.reject(res);\r\n      })\r\n      .catch(() => dispatch({ type: USER_UPDATE_FAILED }));\r\n \r\n};\r\n\r\nexport const login: AppThunk = ({ email, password, history }) => (dispatch: AppDispatch) =>{\r\n  \r\n    dispatch({ type: AUTH_REQUEST });\r\n    fetch(`${BASE_API_URL}/auth/login`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-type': 'application/json',\r\n      },\r\n      body: JSON.stringify({ email: email, password: password }),\r\n    })\r\n      .then((res) => {\r\n\t\tif (res.ok) return res.json();\r\n\t\telse return res.json().then((err) => Promise.reject(err));\r\n\t  })\r\n      .then((res) => {\r\n        if (res.success) {\r\n\t\t\tconst accessToken = res.accessToken.split('Bearer ')[1];\r\n\t\t\tsetCookies('accessToken', accessToken);\r\n\t\t\tsetCookies('refreshToken', res.refreshToken);\r\n\t\t\tdispatch(loginSuccess(res.user));\r\n\t\t\thistory.push('/');\r\n        } else Promise.reject(res);\r\n      })\r\n      .catch(() => dispatch(loginFailed()));\r\n  };\r\n\r\n\r\nexport const logout : AppThunk = () => (dispatch: AppDispatch) => {\r\n  const refreshToken = getCookie('refreshToken');\r\n    dispatch({ type: LOGOUT_REQUEST });\r\n    fetch(`${BASE_API_URL}/auth/logout`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-type': 'application/json',\r\n      },\r\n      body: JSON.stringify({ token: `${refreshToken}` }),\r\n    })\r\n      .then((res) => {\r\n\t\tif (res.ok) return res.json();\r\n\t\telse return res.json().then((err) => Promise.reject(err));\r\n\t  })\r\n      .then((res) => {\r\n        if (res.success) {\r\n\t\t\tdeleteCookies('accessToken');\r\n\t\t\tdeleteCookies('refreshToken');\r\n\t\t\tdispatch({ type: LOGOUT_SUCCESS });\r\n\t\t  } else Promise.reject(res);\r\n      })\r\n      .catch(() => dispatch({ type: LOGOUT_FAILED }));\r\n  };\r\n\r\n","import { refresh } from '../services/actions/user';\r\nimport { TRefresh } from './types';\r\n\r\nexport const BASE_API_URL = 'https://norma.nomoreparties.space/api';\r\n\r\nexport const WS_URL = 'wss://norma.nomoreparties.space/orders';\r\n\r\nexport const emailRegex = /^([a-zA-Z0-9_\\-\\.]+)@([a-zA-Z0-9_\\-\\.]+)\\.([a-zA-Z]{2,5})$/;\r\n\r\nexport const getCookie = (name: string) => {\r\n\tconst matches = document.cookie.match(new RegExp('(?:^|; )' + name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') + '=([^;]*)'));\r\n\treturn matches ? decodeURIComponent(matches[1]) : undefined;\r\n};\r\n\r\nexport const setCookies = (name: string, value: string | number | boolean | null | undefined, props: any = {}) => {\r\n\tprops = {\r\n\t  path: '/',\r\n\t  expires: 'Fri, 31 Dec 9999 23:59:59 GMT',\r\n\t  ...props\r\n\t};\r\n\tlet exp = props.expires;\r\n\tif (typeof exp == 'number' && exp) {\r\n\t  const d = new Date();\r\n\t  d.setTime(d.getTime() + exp * 1000);\r\n\t  exp = props.expires = d;\r\n\t}\r\n\tif (exp && exp.toUTCString) {\r\n\t  props.expires = exp.toUTCString();\r\n\t}\r\n\tvalue = encodeURIComponent(value!);\r\n\tlet updatedCookie = name + '=' + value;\r\n\tfor (const propName in props) {\r\n\t  updatedCookie += '; ' + propName;\r\n\t  const propValue = props[propName];\r\n\t  if (propValue !== true) {\r\n\t\tupdatedCookie += '=' + propValue;\r\n\t  }\r\n\t}\r\n\tdocument.cookie = updatedCookie;\r\n  };\r\n\r\n  export const retriableFetch = async <ReturnType>(url: RequestInfo, options?: RequestInit | undefined | any): Promise<ReturnType> => {\r\n\ttry {\r\n\t  return await fetch(url, options).then(async res => {\r\n\t\tif (res.ok) return res.json() as Promise<ReturnType>;\r\n\t\tconst err = (await res.json()) as Promise<ReturnType>;\r\n\t\treturn await Promise.reject(err);\r\n\t  });\r\n\t} catch (err) {\r\n\t  if ((err as Error).message! === 'jwt expired') {\r\n\t\tconst refreshTokens = await refresh();\r\n\t\tconst accessToken = refreshTokens.accessToken!.split('Bearer ')[1];\r\n\t\tsetCookies('accessToken', accessToken);\r\n\t\tsetCookies('refreshToken', refreshTokens.refreshToken);\r\n\t\tif (!options!.headers) {\r\n\t\t  options!.headers = {};\r\n\t\t}\r\n\t\toptions!.headers.authorization = getCookie('accessToken');\r\n\t\treturn await fetch(url, options).then(async res => {\r\n\t\t  if (res.ok) return res.json() as Promise<ReturnType>;\r\n\t\t  const err = (await res.json()) as Promise<ReturnType>;\r\n\t\t  return await Promise.reject(err);\r\n\t\t});\r\n\t  } else throw err;\r\n\t}\r\n  };\r\n\r\nexport const getDate = (date: string) => {\r\n\tconst currentDate = new Date();\r\n\tif (date.slice(0, 10) === currentDate.toISOString().slice(0, 10)) return `Сегодня, ${date.slice(11, 16)} i-GMT+3`;\r\n\telse return `${date.slice(0, 10)}, ${date.slice(11, 16)} i-GMT+3`;\r\n  };\r\n\r\n  export const deleteCookies = (name: string) => {\r\n\tsetCookies(name, null, { expires: -1 });\r\n  };","import { BASE_API_URL, retriableFetch, getCookie } from '../../utils/constants';\r\nimport { AppThunk, AppDispatch } from '../reducers';\r\nimport { TRes } from '../../utils/types';\r\n\r\n\r\nexport const GET_ORDER_REQUEST = 'GET_ORDER_REQUEST';\r\nexport const GET_ORDER_SUCCESS = 'GET_ORDER_SUCCESS';\r\nexport const GET_ORDER_ERROR = 'GET_ORDER_ERROR';\r\n\r\nexport const RESET_ORDER = 'RESET_ORDER';\r\n\r\ntype TGetOrderActionRequest = { readonly type: typeof GET_ORDER_REQUEST };\r\ntype TGetOrderActionSuccess = { readonly type: typeof GET_ORDER_SUCCESS; readonly payload: number };\r\ntype TGetOrderActionError = { readonly type: typeof GET_ORDER_ERROR };\r\n\r\ntype TResetOrderAction = { readonly type: typeof RESET_ORDER };\r\n\r\nexport type TOrderActions = TGetOrderActionRequest | TGetOrderActionSuccess | TGetOrderActionError | TResetOrderAction;\r\n\r\nexport const getOrder: AppThunk = (itemsId) => \r\n   (dispatch: AppDispatch) => {\r\n\tconst accessToken = getCookie('accessToken');\r\n    dispatch({\r\n      type: GET_ORDER_REQUEST,\r\n    });\r\n    retriableFetch<TRes>(`${BASE_API_URL}/orders`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-type': 'application/json',\r\n\t\tauthorization: `Bearer ${accessToken}`\r\n      },\r\n      body: JSON.stringify({ ingredients: itemsId }),\r\n    })\r\n      .then((res) => dispatch({ type: GET_ORDER_SUCCESS, payload: res.order.number }))\r\n      .catch(() => dispatch({ type: GET_ORDER_ERROR }));\r\n  };\r\n\r\n\r\nexport const clearOrder = (): TResetOrderAction => {\r\n\treturn { type: RESET_ORDER };\r\n};\r\n","import { TIngredientType } from '../../utils/types';\r\n\r\nexport const ADD_CONSTRUCTOR_INGREDIENT = 'ADD_CONSTRUCTOR_INGREDIENT';\r\nexport const DELETE_CONSTRUCTOR_INGREDIENT = 'DELETE_CONSTRUCTOR_INGREDIENT';\r\nexport const INCREASE_CONSTRUCTOR_AMOUNT = 'INCREASE_CONSTRUCTOR_AMOUNT';\r\nexport const DECREASE_CONSTRUCTOR_AMOUNT = 'DECREASE_CONSTRUCTOR_AMOUNT';\r\nexport const ADD_CONSTRUCTOR_BUN = 'ADD_CONSTRUCTOR_BUN';\r\nexport const MOVE_CONSTRUCTOR_INGREDIENTS = 'MOVE_CONSTRUCTOR_INGREDIENTS';\r\n\r\ntype TAddConstructorIngredientAction = { readonly type: typeof ADD_CONSTRUCTOR_INGREDIENT; readonly payload: TIngredientType };\r\ntype TDeleteConstructorIngredientAction = { readonly type: typeof DELETE_CONSTRUCTOR_INGREDIENT; readonly payload: number|undefined|string };\r\ntype TIncreaseConstructorAmountAction = { readonly type: typeof INCREASE_CONSTRUCTOR_AMOUNT };\r\ntype TDecreaseConstructorAmountAction = { readonly type: typeof DECREASE_CONSTRUCTOR_AMOUNT };\r\ntype TAddConstructorBunAction = { readonly type: typeof ADD_CONSTRUCTOR_BUN; readonly payload: TIngredientType };\r\ntype TMoveConstructorIngredientsAction = {\r\n\treadonly type: typeof MOVE_CONSTRUCTOR_INGREDIENTS;\r\n\treadonly payload: { dragIndex: number; hoverIndex: number };\r\n  };\r\n\r\n  export type TBurgerConstructorActions =\r\n  | TAddConstructorIngredientAction\r\n  | TDeleteConstructorIngredientAction\r\n  | TIncreaseConstructorAmountAction\r\n  | TDecreaseConstructorAmountAction  \r\n  | TAddConstructorBunAction\r\n  | TMoveConstructorIngredientsAction;\r\n\r\nexport const addConstructorIngredient = (item: TIngredientType) :TAddConstructorIngredientAction => {\r\n    const uniqueId = Math.trunc(Math.random() * 100000000);\r\n    item.key = uniqueId;\r\n    return({\r\n      type: ADD_CONSTRUCTOR_INGREDIENT,\r\n      payload: item,\r\n    });\r\n  };\r\n\r\nexport const deleteConstructorIngredient = (key:  number|undefined|string): TDeleteConstructorIngredientAction => {\r\n\treturn { type: DELETE_CONSTRUCTOR_INGREDIENT, payload: key };\r\n  };\r\n\r\nexport const increaseConstructorAmount = (): TIncreaseConstructorAmountAction => {\r\n\treturn { type: INCREASE_CONSTRUCTOR_AMOUNT };\r\n  };\r\n\r\nexport const decreaseConstructorAmount = (): TDecreaseConstructorAmountAction => {\r\n\treturn { type: DECREASE_CONSTRUCTOR_AMOUNT };\r\n  };\r\n\r\nexport const addConstructorBun = (item: TIngredientType): TAddConstructorBunAction => {\r\n  const uniqueId = Math.trunc(Math.random() * 100000000);\r\n  item.key = uniqueId;\r\n  return {\r\n\r\n      type: ADD_CONSTRUCTOR_BUN,\r\n      payload: item,\r\n\r\n  };\r\n};\r\n\r\nexport const moveConstructorIngredients = (dragIndex: number, hoverIndex: number): TMoveConstructorIngredientsAction => {\r\n    return({\r\n      type: MOVE_CONSTRUCTOR_INGREDIENTS,\r\n      payload: { dragIndex, hoverIndex },\r\n    });\r\n\r\n};\r\n","import React, { useRef, FC } from 'react';\r\nimport { useDrop, useDrag } from 'react-dnd';\r\nimport { useDispatch } from '../../services/hooks';\r\n\r\nimport { moveConstructorIngredients } from '../../services/actions/burgerConstructor';\r\n\r\ntype TDraggableIngredient = {\r\n  index: number;\r\n};\r\n\r\nexport const DraggableIngredient: FC<TDraggableIngredient> = ({ children, index }) => {\r\n  const dispatch = useDispatch();\r\n  const ref = useRef<HTMLDivElement>(null);\r\n\r\n  const [, drop] = useDrop({\r\n    accept: 'card',\r\n    hover: (item: TDraggableIngredient, monitor) => {\r\n      if (!ref.current) return;\r\n      const dragIndex = item.index;\r\n      const hoverIndex = index;\r\n      // индекс двигаемой карточки совпадает ли с индексом элемента над которым двигаемый находится\r\n      if (dragIndex === hoverIndex) return;\r\n      // нахожу размеры карточки над которой происходит hover\r\n      const hoverBoundingRect = ref.current.getBoundingClientRect();\r\n      // нахожу середину карточки над которой будет зависать двигаемая карточка\r\n      const hoverMiddleY = (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\r\n      // текущая позиция курсора мыши\r\n      const clientOffset = monitor.getClientOffset();\r\n      // расстояние от курсора до верхней границы карточки, над которой hover\r\n      const hoverClientY = clientOffset!.y - hoverBoundingRect.top;\r\n      // тянем сверху вниз\r\n      if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) return;\r\n      // тянем снизу вверх\r\n      if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) return;\r\n      // обновляю порядок элементов\r\n      dispatch(moveConstructorIngredients(dragIndex, hoverIndex));\r\n      item.index = hoverIndex;\r\n    },\r\n  });\r\n\r\n  const [{ isDragging }, drag] = useDrag({\r\n    type: 'card',\r\n    item: { index: index },\r\n    collect: (monitor) => ({\r\n      isDragging: monitor.isDragging(),\r\n    }),\r\n  });\r\n\r\n  const opacity = isDragging ? 0 : 1;\r\n\r\n  drag(drop(ref));\r\n\r\n  return (\r\n    <div ref={ref} style={{ opacity: `${opacity}` }}>\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DraggableIngredient;\r\n","import React, { useMemo } from 'react';\r\nimport { useDispatch, useSelector } from '../../services/hooks';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useDrop } from 'react-dnd';\r\nimport {\r\n  CurrencyIcon,\r\n  Button,\r\n  ConstructorElement,\r\n  DragIcon,\r\n} from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport burgerConstructor from './BurgerConstructor.module.css';\r\nimport { getOrder } from '../../services/actions/order';\r\nimport {\r\n  addConstructorIngredient,\r\n  increaseConstructorAmount,\r\n  decreaseConstructorAmount,\r\n  addConstructorBun,\r\n  deleteConstructorIngredient,\r\n} from '../../services/actions/burgerConstructor';\r\nimport DraggableIngredient from '../DraggableIngredient/DraggableIngredient';\r\nimport { RootState } from '../../services/reducers';\r\nimport {\r\n  TAuthType,\r\n  TBurgerIngredientsType,\r\n  TBurgerConstructorType,\r\n  TIngredientType,\r\n} from '../../utils/types';\r\n\r\ntype TBurgerConstructor = {\r\n  onModalOpen: () => void;\r\n};\r\n\r\nfunction BurgerConstructor({ onModalOpen }: TBurgerConstructor) {\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  const { isAuth } = useSelector((state) => state.user);\r\n  const dataIngredients = useSelector((state) => state.burgerIngredients.ingredients);\r\n  const buns = useMemo(() => {\r\n    return dataIngredients && dataIngredients.filter((item) => item.type === 'bun');\r\n  }, [dataIngredients]);\r\n  const bunsPrice = buns!.length > 0 ? buns![0].price * 2 : 0;\r\n  const { constructorBuns, constructorIngredients } = useSelector(\r\n    (state) => state.burgerConstructor,\r\n  );\r\n\r\n  const sum = useMemo(() => {\r\n    let fullPrice = 0;\r\n    constructorIngredients.forEach((item) => {\r\n      if (item.type !== 'bun') fullPrice += item.price;\r\n    });\r\n    return constructorBuns ? fullPrice + 2 * constructorBuns.price : fullPrice;\r\n  }, [constructorBuns, constructorIngredients]);\r\n\r\n  const handleClickOrder = () => {\r\n    if (!isAuth) return history.replace('/login');\r\n    const ingredientsId = constructorIngredients.map((item) => item._id);\r\n    constructorBuns\r\n      ? dispatch(getOrder([...ingredientsId, constructorBuns._id]))\r\n      : dispatch(getOrder([...ingredientsId, buns![0]._id]));\r\n    onModalOpen();\r\n  };\r\n\r\n  const handleDeleteIngredient = (key: number | undefined | string) => {\r\n    dispatch(deleteConstructorIngredient(key));\r\n    dispatch(decreaseConstructorAmount());\r\n  };\r\n\r\n  const [{ isHover }, dropRef] = useDrop({\r\n    accept: 'ingredient',\r\n    collect: (monitor) => ({\r\n      isHover: monitor.isOver(),\r\n    }),\r\n    drop: (item: TIngredientType) => {\r\n      if (item.type === 'bun') dispatch(addConstructorBun(item));\r\n      else dispatch(addConstructorIngredient(item));\r\n      if (constructorBuns && item.type === 'bun') {\r\n        dispatch(increaseConstructorAmount());\r\n        dispatch(decreaseConstructorAmount());\r\n      } else dispatch(increaseConstructorAmount());\r\n    },\r\n  });\r\n\r\n  return (\r\n    <div id='burgerConstructor-container' className={`${burgerConstructor.container} pt-25 pl-4`}>\r\n      <div\r\n        ref={dropRef}\r\n        className={`${burgerConstructor.block} ${isHover && burgerConstructor.block_hovered}`}\r\n      >\r\n        {constructorBuns || constructorIngredients.length > 0 ? (\r\n          <div className={`${burgerConstructor.ingredients}`}>\r\n            <div className={`${burgerConstructor.elem} ml-8`}>\r\n              <ConstructorElement\r\n                type='top'\r\n                isLocked={true}\r\n                text={`${\r\n                  constructorBuns ? constructorBuns.name : buns![0].name + ' можно заменить'\r\n                } (верх)`}\r\n                price={constructorBuns ? constructorBuns.price : buns![0].price}\r\n                thumbnail={`${constructorBuns ? constructorBuns.image : buns![0].image}`}\r\n                // className={`ml-8`}\r\n              />\r\n            </div>\r\n            <div className={`${burgerConstructor.list}`}>\r\n              {constructorIngredients.map(\r\n                (item, i) =>\r\n                  item.type !== 'bun' && (\r\n                    <DraggableIngredient key={item.key} index={i}>\r\n                      <div className={`${burgerConstructor.elem}`}>\r\n                        <div className={`${burgerConstructor.drag} mr-2`}>\r\n                          <DragIcon type='primary' />\r\n                        </div>\r\n                        <ConstructorElement\r\n                          text={item.name}\r\n                          price={item.price}\r\n                          thumbnail={item.image !== undefined ? item.image : ''}\r\n                          handleClose={() => handleDeleteIngredient(item.key)}\r\n                        />\r\n                      </div>\r\n                    </DraggableIngredient>\r\n                  ),\r\n              )}\r\n            </div>\r\n            <div className={`${burgerConstructor.elem} ml-8`}>\r\n              <ConstructorElement\r\n                type='bottom'\r\n                isLocked={true}\r\n                text={`${\r\n                  constructorBuns ? constructorBuns.name : buns![0].name + ' можно заменить'\r\n                } (низ)`}\r\n                price={constructorBuns ? constructorBuns.price : buns![0].price}\r\n                thumbnail={`${constructorBuns ? constructorBuns.image : buns![0].image}`}\r\n                // className={`ml-8`}\r\n              />\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div className={`${burgerConstructor.empty}`}>\r\n            <h2 className={`text text_type_main-large`}>Добавьте ингридиенты</h2>\r\n          </div>\r\n        )}\r\n      </div>\r\n      <div className={`${burgerConstructor.sumBlock} mr-4 mt-10`}>\r\n        <div className={`${burgerConstructor.sum} mr-10`}>\r\n          <p className={`text text_type_digits-medium mr-2 ${burgerConstructor.sumValue}`}>\r\n            {constructorBuns || constructorIngredients.length > 0\r\n              ? constructorBuns\r\n                ? sum\r\n                : sum + bunsPrice\r\n              : 0}\r\n          </p>\r\n          <CurrencyIcon type='primary' />\r\n        </div>\r\n        <div className={`${!sum && burgerConstructor.btn_disabled} `}>\r\n          <Button type='primary' size='large' onClick={handleClickOrder} disabled={!sum}>\r\n            Оформить заказ\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default BurgerConstructor;\r\n","import React, { FC } from 'react';\r\nimport modalOverlay from './ModalOverlay.module.css';\r\n\r\ntype TModalOverlay = {\r\n  onModalClose: () => void;\r\n};\r\n\r\nexport const ModalOverlay: FC<TModalOverlay> = ({ children, onModalClose }) => {\r\n  return (\r\n    <div\r\n      className={modalOverlay.container}\r\n      onClick={(e) => e.target === e.currentTarget && onModalClose()}\r\n    >\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ModalOverlay;\r\n","import React, { FC } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport modal from './Modal.module.css';\r\nimport ModalOverlay from '../ModalOverlay/ModalOverlay';\r\nimport { CloseIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\n\r\nconst modalRoot: HTMLElement | null = document.getElementById('modals');\r\n\r\ntype TModalProps = {\r\n  onModalClose: () => void;\r\n  modalType: string | null;\r\n  title?: string;\r\n};\r\n\r\nexport const Modal: FC<TModalProps> = ({ onModalClose, children, modalType, title }) => {\r\n  const closeEsc = (e: KeyboardEvent) => {\r\n    e.code === 'Escape' && onModalClose();\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    document.addEventListener('keydown', closeEsc);\r\n    return () => document.removeEventListener('keydown', closeEsc);\r\n  }, []);\r\n\r\n  return ReactDOM.createPortal(\r\n    <ModalOverlay onModalClose={onModalClose}>\r\n      <div id='modal' className={`${modal.modal}`}>\r\n        <div\r\n          className={`${modal.title} pt-10 pl-10 pr-10`}\r\n          style={{ justifyContent: modalType === 'ingredient' ? 'space-between' : 'end' }}\r\n        >\r\n          {modalType === 'ingredient' && <p className={`text text_type_main-large`}>{title}</p>}\r\n          <div className={`${modal.close} pt-10  pr-10`}>\r\n            <div id='close-btn'>\r\n              <CloseIcon type='primary' onClick={onModalClose} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {children}\r\n      </div>\r\n    </ModalOverlay>,\r\n    modalRoot!,\r\n  );\r\n};\r\n\r\nexport default Modal;\r\n","import React from 'react';\r\nimport { useParams, Redirect, useLocation } from 'react-router-dom';\r\nimport { useSelector } from '../../services/hooks';\r\nimport ingredientDetails from './IngredientDetails.module.css';\r\nimport { RootState } from '../../services/reducers';\r\nimport { TBurgerIngredientsType } from '../../utils/types';\r\n\r\nfunction IngredientDetails() {\r\n  const location = useLocation<any>();\r\n  const { id } = useParams<{ id: string }>();\r\n\r\n  const ingredientsData = useSelector((state) => state.burgerIngredients.ingredients);\r\n  const { isIngredientsLoaded } = useSelector((state) => state.burgerIngredients);\r\n  const currentIngredient = React.useMemo(() => {\r\n    return ingredientsData!.find((item) => item._id === id);\r\n  }, [ingredientsData]);\r\n\r\n  if (!isIngredientsLoaded) return null;\r\n  else if (isIngredientsLoaded && !currentIngredient) return <Redirect to='/' />;\r\n\r\n  return (\r\n    <div\r\n      className={`${ingredientDetails.container} pb-15`}\r\n      style={{ height: `${!(location as any).state?.backIngredient && 'calc(100vh - 86px)'}` }}\r\n    >\r\n      <img\r\n        src={currentIngredient?.image}\r\n        alt='ingredient-icon'\r\n        className={ingredientDetails.image}\r\n      />\r\n      <p\r\n        id='ingredient-name'\r\n        className={`text text_type_main-medium mt-4`}\r\n        style={{ textAlign: 'center' }}\r\n      >\r\n        {currentIngredient?.name}\r\n      </p>\r\n      <div className={`${ingredientDetails.details} mt-8`}>\r\n        <div id='calories' className={`${ingredientDetails.detail} mr-5`}>\r\n          <p className='text text_type_main-default text_color_inactive'>Калории,ккал</p>\r\n          <p className='text text_type_digits-default text_color_inactive'>\r\n            {currentIngredient?.calories}\r\n          </p>\r\n        </div>\r\n        <div id='proteins' className={`${ingredientDetails.detail} mr-5`}>\r\n          <p className='text text_type_main-default text_color_inactive'>Белки, г</p>\r\n          <p className='text text_type_digits-default text_color_inactive'>\r\n            {currentIngredient?.proteins}\r\n          </p>\r\n        </div>\r\n        <div id='fat' className={`${ingredientDetails.detail} mr-5`}>\r\n          <p className='text text_type_main-default text_color_inactive'>Жиры, г</p>\r\n          <p className='text text_type_digits-default text_color_inactive'>\r\n            {currentIngredient?.fat}\r\n          </p>\r\n        </div>\r\n        <div id='carbohydrates' className={ingredientDetails.detail}>\r\n          <p className='text text_type_main-default text_color_inactive'>Углеводы, г</p>\r\n          <p className='text text_type_digits-default text_color_inactive'>\r\n            {currentIngredient?.carbohydrates}\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default IngredientDetails;\r\n","export default __webpack_public_path__ + \"static/media/done.cc5a59a7.gif\";","import React from 'react';\r\nimport { useSelector } from '../../services/hooks';\r\nimport orderDetails from './OrderDetails.module.css';\r\nimport done from '../../images/done.gif';\r\n\r\nfunction OrderDetails() {\r\n  const { orderNumber, isOrderLoading } = useSelector((state) => state.order);\r\n\r\n  return (\r\n    <>\r\n      {!isOrderLoading ? (\r\n        <div className={`${orderDetails.container} pb-30`}>\r\n          <h3 className={`text text_type_digits-large ${orderDetails.orderId}`}>{orderNumber}</h3>\r\n          <p className={`text text_type_main-medium mt-8 ${orderDetails.orderIdText}`}>\r\n            идентификатор заказа\r\n          </p>\r\n          <img src={done} alt='done-icon' className='mt-15' />\r\n          <p className={`text text_type_main-default mt-15`}>Ваш заказ начали готовить</p>\r\n          <p className={`text text_type_main-default text_color_inactive mt-2`}>\r\n            Дождитесь готовности на орбитальной станции\r\n          </p>\r\n        </div>\r\n      ) : (\r\n        <div className={orderDetails.container} style={{ justifyContent: 'center' }}>\r\n          <h1 className='text text_type_main-large'>Загрузка...</h1>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default OrderDetails;\r\n","import { BASE_API_URL } from '../../utils/constants';\r\nimport { AppThunk, AppDispatch } from '../reducers';\r\nimport { TIngredientType } from '../../utils/types';\r\nexport const GET_BURGER_INGREDIENTS_REQUEST = 'GET_BURGER_INGREDIENTS_REQUEST';\r\nexport const GET_BURGER_INGREDIENTS_SUCCESS = 'GET_BURGER_INGREDIENTS_SUCCESS';\r\nexport const GET_BURGER_INGREDIENTS_ERROR = 'GET_BURGER_INGREDIENTS_ERROR';\r\n\r\ntype TGetBurgerIngredientsActionRequest = { readonly type: typeof GET_BURGER_INGREDIENTS_REQUEST };\r\ntype TGetBurgerIngredientsActionSuccess = {\r\n  readonly type: typeof GET_BURGER_INGREDIENTS_SUCCESS;\r\n  readonly payload: Array<TIngredientType>;\r\n};\r\ntype TGetBurgerIngredientsActionError = { readonly type: typeof GET_BURGER_INGREDIENTS_ERROR };\r\n\r\nexport type TGetBurgerIngredientsActions =\r\n  | TGetBurgerIngredientsActionRequest\r\n  | TGetBurgerIngredientsActionSuccess\r\n  | TGetBurgerIngredientsActionError;\r\n\r\nconst getBurgerIngredientsRequest = (): TGetBurgerIngredientsActionRequest => {\r\n  return { type: GET_BURGER_INGREDIENTS_REQUEST };\r\n};\r\n\r\nconst getBurgerIngredientsSuccess = (\r\n  data: Array<TIngredientType>,\r\n): TGetBurgerIngredientsActionSuccess => {\r\n  return { type: GET_BURGER_INGREDIENTS_SUCCESS, payload: data };\r\n};\r\n\r\nconst getBurgerIngredientsError = (): TGetBurgerIngredientsActionError => {\r\n  return { type: GET_BURGER_INGREDIENTS_ERROR };\r\n};\r\n\r\nexport const getBurgerIngredients: AppThunk = () => {\r\n  return (dispatch: AppDispatch) => {\r\n    dispatch(getBurgerIngredientsRequest());\r\n    fetch(`${BASE_API_URL}/ingredients`)\r\n      .then((res) => {\r\n        if (res.ok) return res.json();\r\n        else dispatch(getBurgerIngredientsError());\r\n      })\r\n      .then((res) => dispatch(getBurgerIngredientsSuccess(res.data)))\r\n      .catch(() => dispatch(getBurgerIngredientsError()));\r\n  };\r\n};\r\n","import React, { ChangeEvent, FormEvent } from 'react';\r\nimport { Link, useHistory, Redirect, useLocation } from 'react-router-dom';\r\nimport {\r\n  PasswordInput,\r\n  EmailInput,\r\n  Button,\r\n} from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { useDispatch, useSelector } from '../../services/hooks';\r\nimport loginStyle from './Login.module.css';\r\nimport { login } from '../../services/actions/user';\r\nimport { RootState } from '../../services/reducers';\r\nimport { TAuthType } from '../../utils/types';\r\n\r\nfunction Login() {\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const location = useLocation<any>();\r\n  const { isAuth, getUserRequest } = useSelector((state) => state.user);\r\n\r\n  const [email, setEmail] = React.useState('');\r\n  const [password, setPassword] = React.useState('');\r\n\r\n  const onChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n    const target = e.target;\r\n    target.name === 'email' ? setEmail(target.value) : setPassword(target.value);\r\n  };\r\n  const onSubmit = (e: FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n    dispatch(login({ email: email, password: password, history: history }));\r\n  };\r\n\r\n  //   if (getUserRequest) return null;\r\n  if (getUserRequest && isAuth)\r\n    return <Redirect to={{ pathname: (location as any).state?.from ?? '/profile' }} />;\r\n\r\n  return (\r\n    <div className={loginStyle.block}>\r\n      <form onSubmit={onSubmit} noValidate className={loginStyle.form}>\r\n        <h2 className='text text_type_main-medium'>Вход</h2>\r\n        <EmailInput name='email' value={email || ''} onChange={onChange} />\r\n        <PasswordInput name='password' value={password || ''} onChange={onChange} />\r\n        <Button type='primary' size='medium' disabled={!email || !password}>\r\n          Войти\r\n        </Button>\r\n      </form>\r\n      <div className={`${loginStyle.info}`}>\r\n        <div className='text text_type_main-default text_color_inactive mb-4'>\r\n          <span>Вы — новый пользователь?</span>\r\n          <Link to='/register' className={`${loginStyle.link} ml-2`}>\r\n            Зарегистрироваться\r\n          </Link>\r\n        </div>\r\n        <div className='text text_type_main-default text_color_inactive'>\r\n          <span>Забыли пароль?</span>\r\n          <Link to='/forgot-password' className={`${loginStyle.link} ml-2`}>\r\n            Восстановить пароль\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","import React, { ChangeEvent, FormEvent } from 'react';\r\nimport { Link, useHistory, useLocation, Redirect } from 'react-router-dom';\r\nimport { PasswordInput, Input, Button } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { useSelector, useDispatch } from '../../services/hooks';\r\nimport registerStyle from './Register.module.css';\r\nimport { register } from '../../services/actions/user';\r\nimport { emailRegex } from '../../utils/constants';\r\nimport { RootState } from '../../services/reducers';\r\nimport { TAuthType } from '../../utils/types';\r\n\r\nfunction Register() {\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const location = useLocation<any>();\r\n  const { user, isAuth, getUserRequest, errorText, registerError } = useSelector(\r\n    (state) => state.user,\r\n  );\r\n\r\n  const [username, setUsername] = React.useState('');\r\n  const [email, setEmail] = React.useState('');\r\n  const [password, setPassword] = React.useState('');\r\n  const [emailError, setEmailError] = React.useState(false);\r\n  //   const errorText = 'Некорректный email';\r\n\r\n  const onChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n    const target = e.target;\r\n    target.name === 'email'\r\n      ? setEmail(target.value)\r\n      : target.name === 'username'\r\n      ? setUsername(target.value)\r\n      : setPassword(target.value);\r\n  };\r\n\r\n  const onSubmit = (e: FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n    dispatch(register({ email: email, name: username, password: password, history: history }));\r\n  };\r\n\r\n  React.useEffect(\r\n    () =>\r\n      email.length > 0 && !email.match(emailRegex) ? setEmailError(true) : setEmailError(false),\r\n    [email],\r\n  );\r\n\r\n  if (getUserRequest) return null;\r\n  else if (!getUserRequest && isAuth) return <Redirect to={location.state?.from || '/profile'} />;\r\n\r\n  return (\r\n    <div className={registerStyle.block}>\r\n      <form onSubmit={onSubmit} noValidate className={registerStyle.form}>\r\n        <h2 className='text text_type_main-medium'>Регистрация</h2>\r\n        <Input\r\n          type='text'\r\n          placeholder='Имя'\r\n          name='username'\r\n          value={username || ''}\r\n          onChange={onChange}\r\n        />\r\n        <Input\r\n          type='email'\r\n          placeholder='E-mail'\r\n          name='email'\r\n          value={email || ''}\r\n          onChange={onChange}\r\n          error={emailError}\r\n          errorText={'Некорректный email'}\r\n        />\r\n        <PasswordInput name='password' value={password || ''} onChange={onChange} />\r\n        <Button\r\n          type='primary'\r\n          size='medium'\r\n          disabled={!email || emailError || !password || !username || registerError}\r\n        >\r\n          Вход\r\n        </Button>\r\n        <p className='text text_type_main-small mt-2' style={{ color: 'red' }}>\r\n          {errorText === 'Ошибка при регистрации' && errorText}\r\n        </p>\r\n      </form>\r\n      <div className={registerStyle.info}>\r\n        <div className='text text_type_main-default text_color_inactive'>\r\n          <span>Уже зарегистрированы?</span>\r\n          <Link to='/login' className={`${registerStyle.link} ml-2`}>\r\n            Войти\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Register;\r\n","import React, { ChangeEvent, FormEvent } from 'react';\r\nimport { Link, useHistory, useLocation, Redirect } from 'react-router-dom';\r\nimport { Input, Button } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport forgotPassword from './ForgotPassword.module.css';\r\nimport { BASE_API_URL } from '../../utils/constants';\r\nimport { useSelector } from '../../services/hooks';\r\n\r\nfunction ForgotPassword() {\r\n  const history = useHistory();\r\n  const [email, setEmail] = React.useState('');\r\n  const [emailError, setEmailError] = React.useState(false);\r\n  const { isAuth, getUserRequest } = useSelector((state) => state.user);\r\n  const location = useLocation<any>();\r\n  const errorText = 'Некорректный email';\r\n\r\n  const onChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n    const target = e.target;\r\n    target.name === 'email' && setEmail(target.value);\r\n  };\r\n\r\n  const onSubmit = (e: FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n    fetch(`${BASE_API_URL}/password-reset`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-type': 'application/json',\r\n      },\r\n      body: JSON.stringify({ email: email }),\r\n    })\r\n      .then((res) => {\r\n        if (res.ok) return res.json();\r\n        else setEmailError(true);\r\n      })\r\n      .then((res) => {\r\n        if (res.success) history.replace('/reset-password', { forgotPageVisited: true });\r\n        else setEmailError(true);\r\n      })\r\n      .catch(() => setEmailError(true));\r\n  };\r\n\r\n  if (getUserRequest) return null;\r\n  else if (!getUserRequest && isAuth)\r\n    return <Redirect to={(location as any).state?.from || '/profile'} />;\r\n\r\n  return (\r\n    <div className={forgotPassword.block}>\r\n      <form onSubmit={onSubmit} noValidate className={forgotPassword.form}>\r\n        <h2 className='text text_type_main-medium'>Восстановление пароля</h2>\r\n        <Input\r\n          type='email'\r\n          placeholder='Укажите e-mail'\r\n          name='email'\r\n          value={email || ''}\r\n          onChange={onChange}\r\n          error={emailError}\r\n          errorText={errorText}\r\n        />\r\n        <Button type='primary' size='medium' disabled={!email || emailError}>\r\n          Восстановить\r\n        </Button>\r\n      </form>\r\n      <div className={forgotPassword.info}>\r\n        <div className='text text_type_main-default text_color_inactive'>\r\n          <span>Вспомнили пароль?</span>\r\n          <Link to='/login' className={`${forgotPassword.link} ml-2`}>\r\n            Войти\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ForgotPassword;\r\n","import React, { ChangeEvent, FormEvent } from 'react';\r\nimport { Link, useHistory, useLocation, Redirect } from 'react-router-dom';\r\nimport { useSelector } from '../../services/hooks';\r\nimport { Input, Button } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport resetPassword from './ResetPassword.module.css';\r\nimport { BASE_API_URL } from '../../utils/constants';\r\nimport { RootState } from '../../services/reducers';\r\nimport { TAuthType } from '../../utils/types';\r\n\r\nfunction ResetPassword() {\r\n  const history = useHistory();\r\n  const location = useLocation<any>();\r\n  const { isAuth, getUserRequest } = useSelector((state) => state.user);\r\n\r\n  const [showPassword, setShowPassword] = React.useState(false);\r\n  const [code, setCode] = React.useState('');\r\n  const [password, setPassword] = React.useState('');\r\n\r\n  const onChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n    const target = e.target;\r\n    target.name === 'code' ? setCode(target.value) : setPassword(target.value);\r\n  };\r\n\r\n  const onIconClick = () => {\r\n    setShowPassword(!showPassword);\r\n  };\r\n\r\n  const handlePasswordOverlayClick = (e: any) => {\r\n    if (!showPassword && e.currentTarget.classList.value !== 'input__icon input__icon-action')\r\n      setShowPassword(!showPassword);\r\n  };\r\n\r\n  const onSubmit = (e: FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n    fetch(`${BASE_API_URL}/password-reset/reset`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-type': 'application/json',\r\n      },\r\n      body: JSON.stringify({ password: password, token: code }),\r\n    })\r\n      .then((res) => {\r\n        if (res.ok) return res.json();\r\n        else alert('ERROR');\r\n      })\r\n      .then((res) => {\r\n        if (res.success) history.replace('/login', { forgotPageVisited: false });\r\n        else alert('ERROR');\r\n      })\r\n      .catch((err) => alert(err));\r\n  };\r\n\r\n  if (getUserRequest) return null;\r\n  else if (!getUserRequest && isAuth) {\r\n    return <Redirect to={location.state?.from || '/profile'} />;\r\n  } else if (!location.state?.forgotPageVisited) return <Redirect to={'/forgot-password'} />;\r\n\r\n  return (\r\n    <div onClick={handlePasswordOverlayClick}>\r\n      <div className={resetPassword.block}>\r\n        <form onSubmit={onSubmit} noValidate className={resetPassword.form}>\r\n          <h2 className='text text_type_main-medium'>Восстановление пароля</h2>\r\n          <Input\r\n            type={showPassword ? 'password' : 'text'}\r\n            placeholder='Введите новый пароль'\r\n            name='password'\r\n            value={password || ''}\r\n            icon={showPassword ? 'HideIcon' : 'ShowIcon'}\r\n            onChange={onChange}\r\n            onIconClick={onIconClick}\r\n          />\r\n          <Input\r\n            type='text'\r\n            placeholder='Введите код из письма'\r\n            name='code'\r\n            value={code || ''}\r\n            onChange={onChange}\r\n          />\r\n          <Button type='primary' size='medium' disabled={!password || !code}>\r\n            Восстановить\r\n          </Button>\r\n        </form>\r\n        <div className={resetPassword.info}>\r\n          <div className='text text_type_main-default text_color_inactive'>\r\n            <span>Вспомнили пароль?</span>\r\n            <Link to='/login' className={`${resetPassword.link} ml-2`}>\r\n              Войти\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ResetPassword;\r\n","import React, { useMemo } from 'react';\r\nimport { useHistory, useLocation, useParams } from 'react-router-dom';\r\nimport orderCard from './OrderCard.module.css';\r\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { TOrder } from '../../utils/types';\r\nimport { useSelector } from '../../services/hooks';\r\nimport { getDate } from '../../utils/constants';\r\nimport { TIngredientType } from '../../utils/types';\r\nimport { relative } from 'path';\r\n\r\nfunction OrderCard(props: TOrder) {\r\n  const history = useHistory();\r\n  const location = useLocation<any>();\r\n  const { ingredients } = useSelector((state) => state.burgerIngredients);\r\n\r\n  const orderSum = useMemo(() => {\r\n    let sum = 0;\r\n    const prop = props.ingredients;\r\n    ingredients!.forEach((item) => {\r\n      for (let i = 0; i < prop.length; i++) {\r\n        if (item._id === prop[i]) sum += item.price;\r\n      }\r\n    });\r\n    return sum;\r\n  }, [ingredients, props.ingredients]);\r\n\r\n  const handleClick = () => {\r\n    if (location.pathname === '/feed')\r\n      history.replace({ pathname: `/feed/${props._id}`, state: { backFeed: location } });\r\n    if (location.pathname === '/profile/orders')\r\n      history.replace({\r\n        pathname: `/profile/orders/${props._id}`,\r\n        state: { backProfile: location },\r\n      });\r\n  };\r\n\r\n  const ingredientsInfo = (ingredientsOrder: Array<string> | null) => {\r\n    let result: Array<any> = [];\r\n    ingredients?.map((item) => {\r\n      ingredientsOrder!.forEach((element) => {\r\n        if (element === item._id) result.unshift(item.image_mobile);\r\n      });\r\n    });\r\n\r\n    return result;\r\n  };\r\n\r\n  const ingredientsInOrder = ingredientsInfo(props.ingredients);\r\n  const uniqueIngredientsInOrder = ingredientsInOrder?.reduce((unique, item) => {\r\n    return unique.includes(item) ? unique : [...unique, item];\r\n  }, []);\r\n\r\n  const slicedIngredients = uniqueIngredientsInOrder.reverse().slice(0, 6).reverse();\r\n\r\n  return (\r\n    <div className={`${orderCard.card}`} onClick={handleClick}>\r\n      <div className={`${orderCard.orderAndDate} mb-6`}>\r\n        <p className='text text_type_digits-default'>{`#${props.number}`}</p>\r\n        <p className='text text_type_main-small text_color_inactive'>{getDate(props.createdAt)}</p>\r\n      </div>\r\n      <p className='text text_type_main-medium mb-6'> {props.name}</p>\r\n      <div\r\n        className={orderCard.details}\r\n        style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}\r\n      >\r\n        <div className={orderCard.imgBlock}>\r\n          {slicedIngredients.map((item: string, i: number) =>\r\n            uniqueIngredientsInOrder.length - slicedIngredients.length === 0 ? (\r\n              <img\r\n                key={i}\r\n                src={`${item}`}\r\n                alt='feed'\r\n                className={orderCard.img}\r\n                style={{ marginRight: i !== 0 ? '-16px' : '0' }}\r\n              />\r\n            ) : (\r\n              <div style={{ position: 'relative' }} key={i}>\r\n                <img\r\n                  src={`${item}`}\r\n                  alt='feed'\r\n                  className={orderCard.img}\r\n                  style={{ marginRight: i !== 0 ? '-16px' : '0' }}\r\n                />\r\n                <div className={`${i === 0 ? orderCard.extra : ''} text text_type_main-default`}>\r\n                  {i === 0 && '+' + (uniqueIngredientsInOrder.length - slicedIngredients.length)}\r\n                </div>\r\n              </div>\r\n            ),\r\n          )}\r\n        </div>\r\n\r\n        <div className={orderCard.price}>\r\n          <p className='text text_type_digits-default mr-1'>{orderSum}</p>\r\n          <CurrencyIcon type='primary' />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default OrderCard;\r\n","export const WS_CONNECTION_START: 'WS_CONNECTION_START' = 'WS_CONNECTION_START';\r\nexport const WS_CONNECTION_SUCCESS: 'WS_CONNECTION_SUCCESS' = 'WS_CONNECTION_SUCCESS';\r\nexport const WS_CONNECTION_ERROR: 'WS_CONNECTION_ERROR' = 'WS_CONNECTION_ERROR';\r\nexport const WS_CONNECTION_CLOSED: 'WS_CONNECTION_CLOSED' = 'WS_CONNECTION_CLOSED';\r\nexport const WS_GET_MESSAGE: 'WS_GET_MESSAGE' = 'WS_GET_MESSAGE';\r\nexport const WS_SEND_MESSAGE: 'WS_SEND_MESSAGE' = 'WS_SEND_MESSAGE';","import React, { ChangeEvent } from 'react';\r\nimport { NavLink, useHistory, Switch, Route } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from '../../services/hooks';\r\nimport { Input, Button } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport profile from './Profile.module.css';\r\nimport { updateUser, logout } from '../../services/actions/user';\r\nimport { RootState } from '../../services/reducers';\r\nimport { TAuthType } from '../../utils/types';\r\nimport OrderCard from '../../components/OrderCard/OrderCard';\r\nimport { WS_CONNECTION_START, WS_CONNECTION_CLOSED } from '../../services/types';\r\nimport { getCookie, WS_URL } from '../../utils/constants';\r\n\r\nfunction Profile() {\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n  const user = useSelector((state) => state.user);\r\n  const accessToken = getCookie('accessToken');\r\n  const { orders } = useSelector((state) => state.orders);\r\n\r\n  const [email, setEmail] = React.useState('');\r\n  const [name, setName] = React.useState('');\r\n  const [password, setPassword] = React.useState('54321L');\r\n\r\n  const onChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n    const target = e.target;\r\n    target.name === 'email'\r\n      ? setEmail(target.value)\r\n      : target.name === 'name'\r\n      ? setName(target.value)\r\n      : setPassword(target.value);\r\n  };\r\n\r\n  const cancelClick = () => {\r\n    setEmail(user.user!.email);\r\n    setName(user.user!.name);\r\n    setPassword('54321L');\r\n  };\r\n\r\n  const exitClick = () => {\r\n    dispatch(logout());\r\n    history.replace('/login');\r\n  };\r\n\r\n  const saveUserInfo = () => {\r\n    if (email !== user.user!.email || name !== user.user!.name)\r\n      dispatch(updateUser({ email: email, name: name, password: password }));\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    setEmail(user.user!.email);\r\n    setName(user.user!.name);\r\n  }, [user.user]);\r\n\r\n  React.useEffect(() => {\r\n    dispatch({ type: WS_CONNECTION_START, payload: `${WS_URL}/all?token=${accessToken}` });\r\n    return () => {\r\n      dispatch({ type: WS_CONNECTION_CLOSED });\r\n    };\r\n  }, [accessToken, dispatch]);\r\n\r\n  return (\r\n    <div className={profile.block}>\r\n      <div className={`${profile.nav}`}>\r\n        <nav className={profile.navBar}>\r\n          <NavLink\r\n            exact\r\n            to='/profile'\r\n            className={`text text_type_main-medium text_color_inactive ${profile.navLink} pt-4 pb-4`}\r\n            activeClassName={profile.activeNavLink}\r\n          >\r\n            Профиль\r\n          </NavLink>\r\n          <NavLink\r\n            to='/profile/orders'\r\n            className={`text text_type_main-medium text_color_inactive ${profile.navLink} pt-4 pb-4`}\r\n            activeClassName={profile.activeNavLink}\r\n          >\r\n            История заказов\r\n          </NavLink>\r\n          <NavLink\r\n            to='/profile/exit'\r\n            className={`text text_type_main-medium text_color_inactive ${profile.navLink} pt-4 pb-4`}\r\n            activeClassName={profile.activeNavLink}\r\n            onClick={exitClick}\r\n          >\r\n            Выход\r\n          </NavLink>\r\n        </nav>\r\n        <p className={`text text_type_main-small text_color_inactive ${profile.navText}`}>\r\n          В этом разделе вы можете изменить свои персональные данные\r\n        </p>\r\n      </div>\r\n      <Switch>\r\n        <Route path='/profile' exact>\r\n          <div>\r\n            <div className={profile.profileBlock}>\r\n              <Input\r\n                placeholder='Имя'\r\n                name='name'\r\n                value={name}\r\n                onChange={onChange}\r\n                icon={'EditIcon'}\r\n              />\r\n              <Input\r\n                placeholder='Логин'\r\n                name='email'\r\n                value={email}\r\n                onChange={onChange}\r\n                icon={'EditIcon'}\r\n              />\r\n              <Input\r\n                placeholder='Пароль'\r\n                name='password'\r\n                value={password}\r\n                onChange={onChange}\r\n                icon={'EditIcon'}\r\n                type='password'\r\n              />\r\n              <div\r\n                style={{\r\n                  width: '100%',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'flex-end',\r\n                }}\r\n              >\r\n                <Button size='medium' type='secondary' onClick={cancelClick}>\r\n                  Отмена\r\n                </Button>\r\n                <Button size='medium' type='primary' onClick={saveUserInfo}>\r\n                  Сохранить\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </Route>\r\n        <Route path='/profile/orders'>\r\n          <div className={`${profile.ordersBlock}`}>\r\n            {orders.map((order) => (\r\n              <OrderCard\r\n                key={order._id}\r\n                _id={order._id}\r\n                createdAt={order.createdAt}\r\n                updatedAt={order.updatedAt}\r\n                status={order.status}\r\n                number={order.number}\r\n                name={order.name}\r\n                ingredients={order.ingredients}\r\n              />\r\n            ))}\r\n          </div>\r\n        </Route>\r\n      </Switch>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Profile;\r\n","import React, { useEffect, useMemo } from 'react';\r\nimport OrderCard from '../../components/OrderCard/OrderCard';\r\nimport { useSelector, useDispatch } from '../../services/hooks';\r\nimport { WS_CONNECTION_START, WS_CONNECTION_CLOSED } from '../../services/types';\r\nimport { WS_URL } from '../../utils/constants';\r\n\r\nimport feed from './Feed.module.css';\r\n\r\nfunction Feed() {\r\n  const dispatch = useDispatch();\r\n  const { total, totalToday, orders } = useSelector((state) => state.orders);\r\n\r\n  const doneOrders = useMemo(() => {\r\n    return orders.filter((item) => item.status === 'done').slice(0, 5);\r\n  }, [orders]);\r\n\r\n  const pendingOrders = useMemo(() => {\r\n    return orders.filter((item) => item.status === 'pending').slice(0, 10);\r\n  }, [orders]);\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: WS_CONNECTION_START, payload: `${WS_URL}/all` });\r\n    return () => {\r\n      dispatch({ type: WS_CONNECTION_CLOSED });\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div className={`${feed.container}`}>\r\n      <div className={`${feed.list} mr-10`}>\r\n        <p className='text text_type_main-large mt-10 mb-5'>Лента заказов</p>\r\n        <div className={`${feed.ordersBlock}`}>\r\n          {orders.map((order) => (\r\n            <OrderCard\r\n              key={order._id}\r\n              _id={order._id}\r\n              createdAt={order.createdAt}\r\n              updatedAt={order.updatedAt}\r\n              status={order.status}\r\n              number={order.number}\r\n              name={order.name}\r\n              ingredients={order.ingredients}\r\n            />\r\n          ))}\r\n        </div>\r\n      </div>\r\n      <div className={`${feed.ordersInfo} pt-25`}>\r\n        <div className={feed.ordersNumbers}>\r\n          <div className={feed.ordersReady}>\r\n            <p className='text text_type_main-medium mb-4'>Готовы:</p>\r\n            <div>\r\n              {doneOrders.map((item) => (\r\n                <p\r\n                  key={Math.random()}\r\n                  className={`text text_type_digits-default ${feed.orderNumberReady} mt-2`}\r\n                >\r\n                  {item.number}\r\n                </p>\r\n              ))}\r\n            </div>\r\n          </div>\r\n          <div className={feed.ordersInWork}>\r\n            <p className='text text_type_main-medium mb-4'>В работе:</p>\r\n            <div>\r\n              {pendingOrders.map((item) => (\r\n                <p key={Math.random()} className='text text_type_digits-default'>\r\n                  {item.number}\r\n                </p>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div>\r\n          <p className='text text_type_main-medium mt-15'>Выполнено за все время:</p>\r\n          <p className={`text text_type_digits-large ${feed.largeNumber}`}>{total}</p>\r\n        </div>\r\n        <div>\r\n          <p className='text text_type_main-medium mt-15'>Выполнено за сегодня:</p>\r\n          <p className={`text text_type_digits-large ${feed.largeNumber}`}>{totalToday}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Feed;\r\n","import React, { useEffect, useMemo } from 'react';\r\nimport { useParams, useLocation } from 'react-router-dom';\r\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport feedDetails from './FeedDetails.module.css';\r\nimport { useSelector, useDispatch } from '../../services/hooks';\r\nimport { getDate, WS_URL } from '../../utils/constants';\r\nimport { WS_CONNECTION_START, WS_CONNECTION_CLOSED } from '../../services/types';\r\nimport { TIngredientType } from '../../utils/types';\r\n\r\nfunction FeedDetails() {\r\n  const location = useLocation<any>();\r\n  const { id } = useParams<{ id: string }>();\r\n  const dispatch = useDispatch();\r\n  const { orders } = useSelector((state) => state.orders);\r\n  const { ingredients } = useSelector((state) => state.burgerIngredients);\r\n\r\n  const order = useMemo(() => {\r\n    return orders.find((item) => item._id === id);\r\n  }, [id, orders]);\r\n\r\n  const ingredientsInfo = (ingredients: Array<TIngredientType> | null) => {\r\n    let result: Array<TIngredientType> = [];\r\n    order?.ingredients.map((item) => {\r\n      ingredients!.forEach((element) => {\r\n        if (element._id === item) result.push(element);\r\n      });\r\n    });\r\n    return result;\r\n  };\r\n\r\n  const ingredientsInOrder = ingredientsInfo(ingredients);\r\n  const orderPrice = useMemo(() => {\r\n    let price: number = 0;\r\n    ingredientsInOrder.forEach((item) => (price += item.price));\r\n    return price;\r\n  }, [ingredientsInOrder]);\r\n\r\n  useEffect(() => {\r\n    if (!location.state) dispatch({ type: WS_CONNECTION_START, payload: `${WS_URL}/all` });\r\n    return () => {\r\n      if (!location.state) dispatch({ type: WS_CONNECTION_CLOSED });\r\n    };\r\n  }, []);\r\n\r\n  if (!order) return null;\r\n\r\n  return (\r\n    <div\r\n      className={`pb-10 pl-10 pr-10 ${feedDetails.container}`}\r\n      style={{\r\n        height: `${\r\n          (!(location as any).state?.backFeed || !(location as any).state?.backProfile) &&\r\n          'calc(100vh - 86px)'\r\n        }`,\r\n      }}\r\n    >\r\n      <p\r\n        className='text text_type_digits-default mb-10'\r\n        style={{ textAlign: 'center' }}\r\n      >{`#${order?.number}`}</p>\r\n      <div className='mb-15'>\r\n        <p className='text text_type_main-medium mb-3'>{order?.name}</p>\r\n        <p\r\n          className='text text_type_main-small'\r\n          style={{ color: order?.status === 'done' ? '#00CCCC' : '#CC0013' }}\r\n        >\r\n          {order?.status === 'done' ? 'Выполнен' : 'Отменен'}\r\n        </p>\r\n      </div>\r\n      <p className='text text_type_main-medium mb-6'>Состав:</p>\r\n      <div className={`${feedDetails.list} mb-10`}>\r\n        {ingredientsInOrder.map((item) => (\r\n          <div\r\n            key={item._id + Math.random()}\r\n            style={{\r\n              width: '95%',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'space-between',\r\n            }}\r\n            className={`mb-4`}\r\n          >\r\n            <div style={{ display: 'flex', alignItems: 'center' }}>\r\n              <img src={item.image_mobile} alt='feed' className={feedDetails.img} />\r\n              <span className='text text_type_main-small'>{item.name}</span>\r\n            </div>\r\n            <div style={{ display: 'flex', alignItems: 'center' }}>\r\n              <p className={`text text_type_main-medium mr-2`}>{item.price}</p>\r\n              <CurrencyIcon type='primary' />\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n      <div\r\n        className={`${feedDetails.priceAndDate}`}\r\n        style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}\r\n      >\r\n        <p className='text text_type_main-small text_color_inactive'>{getDate(order!.createdAt)}</p>\r\n        <div style={{ display: 'flex', alignItems: 'center' }}>\r\n          <p className={`text text_type_main-medium mr-2`}>{orderPrice}</p>\r\n          <CurrencyIcon type='primary' />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default FeedDetails;\r\n","import React, { FC } from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport { useSelector } from '../../services/hooks';\r\nimport { RootState } from '../../services/reducers';\r\nimport { TAuthType } from '../../utils/types';\r\n\r\ntype TProtectedRouteProps = {\r\n  path: string;\r\n};\r\n\r\nexport const ProtectedRoute: FC<TProtectedRouteProps> = ({ children, ...rest }) => {\r\n  const { isAuth, getUserRequest } = useSelector((state) => state.user);\r\n\r\n  if (getUserRequest && !isAuth) return null;\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={({ location }) =>\r\n        isAuth ? (\r\n          children\r\n        ) : (\r\n          <Redirect to={{ pathname: '/login', state: { from: location.pathname } }} />\r\n        )\r\n      }\r\n      exact\r\n    />\r\n  );\r\n};\r\n","import React, { useCallback } from 'react';\r\nimport { useDispatch } from '../../services/hooks';\r\nimport { HTML5Backend } from 'react-dnd-html5-backend';\r\nimport { DndProvider } from 'react-dnd';\r\nimport { Switch, Route, useHistory, useLocation } from 'react-router-dom';\r\nimport app from './App.module.css';\r\nimport AppHeader from '../AppHeader/AppHeader';\r\nimport BurgerIngredients from '../BurgerIngredients/BurgerIngredients';\r\nimport BurgerConstructor from '../BurgerConstructor/BurgerConstructor';\r\nimport Modal from '../Modal/Modal';\r\nimport IngredientDetails from '../IngredientDetails/IngredientDetails';\r\nimport OrderDetails from '../OrderDetails/OrderDetails';\r\nimport { getBurgerIngredients } from '../../services/actions/burgerIngredients';\r\nimport { clearOrder } from '../../services/actions/order';\r\n\r\nimport Login from '../../pages/Login/Login';\r\nimport Register from '../../pages/Register/Register';\r\nimport ForgotPassword from '../../pages/ForgotPassword/ForgotPassword';\r\nimport ResetPassword from '../../pages/ResetPassword/ResetPassword';\r\nimport Profile from '../../pages/Profile/Profile';\r\nimport Feed from '../../pages/Feed/Feed';\r\nimport FeedDetails from '../../pages/FeedDetails/FeedDetails';\r\n\r\nimport { GET_USER_FAILED, getUser } from '../../services/actions/user';\r\nimport { getCookie } from '../../utils/constants';\r\n\r\nimport { ProtectedRoute } from '../ProtectedRoute/ProtectedRoute';\r\n\r\nexport const App = () => {\r\n  const [showModal, setShowModal] = React.useState(false);\r\n  const [modalType, setModalType] = React.useState<string | null>(null);\r\n\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const location = useLocation<any>();\r\n\r\n  const handleOpenModal = () => {\r\n    setShowModal(true);\r\n  };\r\n\r\n  const handleCloseModal = () => {\r\n    setShowModal(false);\r\n    if (modalType === 'order') {\r\n      dispatch(clearOrder());\r\n      setModalType(null);\r\n    }\r\n    if (location.state?.backIngredient) history.replace(location.state?.backIngredient);\r\n    if (location.state?.backFeed) history.replace(location.state?.backFeed);\r\n    if (location.state?.backProfile) history.replace(location.state?.backProfile);\r\n  };\r\n\r\n  const handleOpenModalOrder = useCallback(() => {\r\n    setModalType('order');\r\n    handleOpenModal();\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    if (getCookie('accessToken')) dispatch(getUser());\r\n    else dispatch({ type: GET_USER_FAILED });\r\n    dispatch(getBurgerIngredients());\r\n  }, [dispatch]);\r\n\r\n  return (\r\n    <>\r\n      {showModal && modalType === 'order' && (\r\n        <Modal onModalClose={handleCloseModal} modalType={modalType}>\r\n          <OrderDetails />\r\n        </Modal>\r\n      )}\r\n      <AppHeader />\r\n      <Switch\r\n        location={\r\n          location.state?.backIngredient ??\r\n          location.state?.backFeed ??\r\n          location.state?.backProfile ??\r\n          location\r\n        }\r\n      >\r\n        <Route path='/' exact>\r\n          <main className={`${app.main} pl-4 pr-4 mb-8`}>\r\n            <DndProvider backend={HTML5Backend}>\r\n              <BurgerIngredients />\r\n              <BurgerConstructor onModalOpen={handleOpenModalOrder} />\r\n            </DndProvider>\r\n          </main>\r\n        </Route>\r\n        <Route path='/feed' exact>\r\n          <Feed />\r\n        </Route>\r\n        <Route path='/feed/:id'>\r\n          <FeedDetails />\r\n        </Route>\r\n        <Route path='/profile/orders/:id'>\r\n          <FeedDetails />\r\n        </Route>\r\n        <Route path='/login' exact>\r\n          <Login />\r\n        </Route>\r\n        <Route path='/register' exact>\r\n          <Register />\r\n        </Route>\r\n        <Route path='/forgot-password' exact>\r\n          <ForgotPassword />\r\n        </Route>\r\n        <Route path='/reset-password' exact>\r\n          <ResetPassword />\r\n        </Route>\r\n        <ProtectedRoute path='/profile'>\r\n          <Profile />\r\n        </ProtectedRoute>\r\n        <Route path='/ingredients/:id'>\r\n          <IngredientDetails />\r\n        </Route>\r\n      </Switch>\r\n\r\n      {location.state?.backIngredient && (\r\n        <Route path='/ingredients/:id'>\r\n          <Modal\r\n            onModalClose={handleCloseModal}\r\n            modalType={'ingredient'}\r\n            title={'Детали ингредиента'}\r\n          >\r\n            <IngredientDetails />\r\n          </Modal>\r\n        </Route>\r\n      )}\r\n\r\n      {location.state?.backFeed && (\r\n        <Route path='/feed/:id'>\r\n          <Modal onModalClose={handleCloseModal} modalType={'order'}>\r\n            <FeedDetails />\r\n          </Modal>\r\n        </Route>\r\n      )}\r\n\r\n      {location.state?.backProfile && (\r\n        <Route path='/profile/orders/:id'>\r\n          <Modal onModalClose={handleCloseModal} modalType={'order'}>\r\n            <FeedDetails />\r\n          </Modal>\r\n        </Route>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import {\r\n  GET_BURGER_INGREDIENTS_REQUEST,\r\n  GET_BURGER_INGREDIENTS_SUCCESS,\r\n  GET_BURGER_INGREDIENTS_ERROR,\r\n} from '../actions/burgerIngredients';\r\nimport { TIngredientType } from '../../utils/types';\r\nimport { TGetBurgerIngredientsActions } from '../actions/burgerIngredients';\r\n\r\ntype TInitialState = {\r\n\tingredients: Array<TIngredientType> | null;\r\n\tisIngredientsLoading: boolean;\r\n\tisIngredientsGetFailed: boolean;\r\n\tisIngredientsLoaded: boolean;\r\n  };\r\n\r\nconst initialState: TInitialState = {\r\n  ingredients: [],\r\n  isIngredientsLoading: false,\r\n  isIngredientsGetFailed: false,\r\n  isIngredientsLoaded: false,\r\n};\r\n\r\nexport const burgerIngredientsReducer = (state = initialState, action: TGetBurgerIngredientsActions): TInitialState => {\r\n  switch (action.type) {\r\n    case GET_BURGER_INGREDIENTS_REQUEST: {\r\n      return {\r\n        ...state,\r\n        isIngredientsLoading: true,\r\n      };\r\n    }\r\n    case GET_BURGER_INGREDIENTS_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        ingredients: action.payload,\r\n        isIngredientsLoading: false,\r\n        isIngredientsGetFailed: false,\r\n        isIngredientsLoaded: true,\r\n      };\r\n    }\r\n    case GET_BURGER_INGREDIENTS_ERROR: {\r\n      return {\r\n        ...initialState,\r\n        isIngredientsLoading: false,\r\n        isIngredientsGetFailed: true,\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import {\r\n  ADD_CONSTRUCTOR_INGREDIENT,\r\n  DELETE_CONSTRUCTOR_INGREDIENT,\r\n  ADD_CONSTRUCTOR_BUN,\r\n  INCREASE_CONSTRUCTOR_AMOUNT,\r\n  DECREASE_CONSTRUCTOR_AMOUNT,\r\n  MOVE_CONSTRUCTOR_INGREDIENTS,\r\n  TBurgerConstructorActions\r\n} from '../actions/burgerConstructor';\r\nimport { TIngredientType } from '../../utils/types';\r\n\r\ntype TInitialState = {\r\n\tconstructorBuns: TIngredientType | null;\r\n\tconstructorIngredients: Array<TIngredientType> | [];\r\n\tconstructorAmount: number;\r\n  };\r\n\r\nconst initialState: TInitialState = {\r\n  constructorBuns: null,\r\n  constructorIngredients: [],\r\n  constructorAmount: 0,\r\n};\r\n\r\nexport const burgerConstructorReducer = (state = initialState, action: TBurgerConstructorActions): TInitialState => {\r\n  switch (action.type) {\r\n    case ADD_CONSTRUCTOR_INGREDIENT: {\r\n      return {\r\n        ...state,\r\n        constructorIngredients: [...state.constructorIngredients, action.payload],\r\n      };\r\n    }\r\n    case DELETE_CONSTRUCTOR_INGREDIENT: {\r\n      const key = action.payload;\r\n      const newConstructorIngredients = state.constructorIngredients.filter(\r\n        (item) => item.key !== key,\r\n      );\r\n      return {\r\n        ...state,\r\n        constructorIngredients: newConstructorIngredients,\r\n      };\r\n    }\r\n    case ADD_CONSTRUCTOR_BUN: {\r\n      return {\r\n        ...state,\r\n        constructorBuns: action.payload,\r\n      };\r\n    }\r\n    case INCREASE_CONSTRUCTOR_AMOUNT: {\r\n      return {\r\n        ...state,\r\n        constructorAmount: state.constructorAmount + 1,\r\n      };\r\n    }\r\n    case DECREASE_CONSTRUCTOR_AMOUNT: {\r\n      return {\r\n        ...state,\r\n        constructorAmount: state.constructorAmount - 1,\r\n      };\r\n    }\r\n    case MOVE_CONSTRUCTOR_INGREDIENTS: {\r\n      const newConstructorIngredients = [...state.constructorIngredients];\r\n      newConstructorIngredients.splice(\r\n        action.payload.hoverIndex,\r\n        0,\r\n        newConstructorIngredients.splice(action.payload.dragIndex, 1)[0],\r\n      );\r\n      return {\r\n        ...state,\r\n        constructorIngredients: newConstructorIngredients,\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import {\r\n  GET_ORDER_REQUEST,\r\n  GET_ORDER_SUCCESS,\r\n  GET_ORDER_ERROR,\r\n  RESET_ORDER,\r\n} from '../actions/order';\r\nimport { TOrderActions } from '../actions/order';\r\n\r\ntype TInitialState = {\r\n\torderNumber: number | null;\r\n\tisOrderLoading: boolean;\r\n\tisOrderGetFailed: boolean;\r\n  };\r\n\r\nconst initialState: TInitialState = {\r\n  orderNumber: null,\r\n  isOrderLoading: false,\r\n  isOrderGetFailed: false,\r\n};\r\n\r\nexport const orderReducer = (state = initialState, action: TOrderActions): TInitialState => {\r\n  switch (action.type) {\r\n    case GET_ORDER_REQUEST: {\r\n      return {\r\n        ...state,\r\n        isOrderLoading: true,\r\n      };\r\n    }\r\n    case GET_ORDER_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        orderNumber: action.payload,\r\n        isOrderLoading: false,\r\n        isOrderGetFailed: false,\r\n      };\r\n    }\r\n    case GET_ORDER_ERROR: {\r\n      return {\r\n        ...initialState,\r\n        isOrderLoading: false,\r\n        isOrderGetFailed: true,\r\n      };\r\n    }\r\n    case RESET_ORDER: {\r\n      return {\r\n        ...initialState,\r\n        orderNumber: null,\r\n        isOrderLoading: false,\r\n        isOrderGetFailed: false,\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import {\r\n  REGISTER_REQUEST,\r\n  REGISTER_SUCCESS,\r\n  REGISTER_FAILED,\r\n  AUTH_REQUEST,\r\n  AUTH_SUCCESS,\r\n  AUTH_FAILED,\r\n  LOGOUT_REQUEST,\r\n  LOGOUT_SUCCESS,\r\n  LOGOUT_FAILED,\r\n  GET_USER_REQUEST,\r\n  GET_USER_SUCCESS,\r\n  GET_USER_FAILED,\r\n  USER_UPDATE_REQUEST,\r\n  USER_UPDATE_SUCCESS,\r\n  USER_UPDATE_FAILED,\r\n} from '../actions/user';\r\n\r\nimport { TUser } from '../../utils/types';\r\nimport { TUserActions } from '../actions/user';\r\n\r\ntype TInitialState = {\r\n\tregisterRequest: boolean;\r\n\tregisterError: boolean;\r\n\tauthRequest: boolean;\r\n\tauthError: boolean;\r\n\tlogoutRequest: boolean;\r\n\tlogoutError: boolean;\r\n\terrorText: string | null;\r\n\tgetUserRequest: boolean;\r\n\tgetUserError: boolean;\r\n\tgetUserLoaded: boolean;\r\n\tuserUpdateRequest: boolean;\r\n\tuserUpdateError: boolean;\r\n\tisAuth: boolean;\r\n\tuser: TUser | null|undefined;\r\n  };\r\n\r\nconst initialState: TInitialState = {\r\n  registerRequest: false,\r\n  registerError: false,\r\n  authRequest: false,\r\n  authError: false,\r\n  logoutRequest: false,\r\n  logoutError: false,\r\n  errorText: null,\r\n  getUserRequest: true,\r\n  getUserError: false,\r\n  getUserLoaded: false,\r\n  userUpdateRequest: false,\r\n  userUpdateError: false,\r\n  isAuth: false,\r\n  user: null,\r\n};\r\n\r\nexport const userReducer = (state = initialState, action: TUserActions): TInitialState => {\r\n  switch (action.type) {\r\n    case REGISTER_REQUEST: {\r\n      return {\r\n        ...state,\r\n        registerRequest: true,\r\n      };\r\n    }\r\n    case REGISTER_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        registerRequest: false,\r\n        registerError: false,\r\n        errorText: '',\r\n      };\r\n    }\r\n    case REGISTER_FAILED: {\r\n      return {\r\n        ...state,\r\n        registerRequest: false,\r\n        registerError: true,\r\n        errorText: 'Ошибка при регистрации',\r\n      };\r\n    }\r\n    case AUTH_REQUEST: {\r\n      return {\r\n        ...state,\r\n        authRequest: true,\r\n      };\r\n    }\r\n    case AUTH_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        authRequest: false,\r\n        authError: false,\r\n        user: action.payload,\r\n        isAuth: true,\r\n        errorText: '',\r\n      };\r\n    }\r\n    case AUTH_FAILED: {\r\n      return {\r\n        ...state,\r\n        authRequest: false,\r\n        authError: true,\r\n        errorText: 'Ошибка при авторизации',\r\n        isAuth: false,\r\n      };\r\n    }\r\n    case LOGOUT_REQUEST: {\r\n      return {\r\n        ...state,\r\n        logoutRequest: true,\r\n      };\r\n    }\r\n    case LOGOUT_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        logoutRequest: false,\r\n        logoutError: false,\r\n        isAuth: false,\r\n        user: null,\r\n        errorText: '',\r\n      };\r\n    }\r\n    case LOGOUT_FAILED: {\r\n      return {\r\n        ...state,\r\n        logoutRequest: false,\r\n        logoutError: true,\r\n        errorText: 'Ошибка при выходе пользователя',\r\n      };\r\n    }\r\n    case GET_USER_REQUEST: {\r\n      return {\r\n        ...state,\r\n        getUserRequest: true,\r\n      };\r\n    }\r\n    case GET_USER_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        getUserRequest: false,\r\n        getUserError: false,\r\n        user: action.payload,\r\n        isAuth: true,\r\n        errorText: '',\r\n      };\r\n    }\r\n    case GET_USER_FAILED: {\r\n      return {\r\n        ...state,\r\n        getUserRequest: false,\r\n        getUserError: true,\r\n        errorText: 'Ошибка при получении данных пользователя',\r\n        getUserLoaded: false,\r\n      };\r\n    }\r\n    case USER_UPDATE_REQUEST: {\r\n      return {\r\n        ...state,\r\n        userUpdateRequest: true,\r\n      };\r\n    }\r\n    case USER_UPDATE_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        userUpdateRequest: false,\r\n        userUpdateError: false,\r\n        user: action.payload,\r\n        errorText: '',\r\n      };\r\n    }\r\n    case USER_UPDATE_FAILED: {\r\n      return {\r\n        ...state,\r\n        userUpdateRequest: false,\r\n        userUpdateError: true,\r\n        errorText: 'Ошибка при обновлении данных пользователя',\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import { WS_CONNECTION_START, WS_CONNECTION_CLOSED, WS_CONNECTION_ERROR, WS_CONNECTION_SUCCESS, WS_GET_MESSAGE } from '../types';\r\nimport { TOrder } from '../../utils/types';\r\nimport { TWSActions } from '../actions/orders';\r\n\r\ntype TInitialState = {\r\n  ordersAllRequest: boolean;\r\n  ordersAllFailed: boolean;\r\n  total: number;\r\n  totalToday: number;\r\n  orders: Array<TOrder>;\r\n  wsConnected: boolean;\r\n  error?: Event;\r\n};\r\n\r\nconst initialState: TInitialState = {\r\n  ordersAllRequest: false,\r\n  ordersAllFailed: false,\r\n  total: 0,\r\n  totalToday: 0,\r\n  orders: [],\r\n  wsConnected: false\r\n};\r\n\r\nexport const ordersReducer = (state = initialState, action: TWSActions): TInitialState => {\r\n  switch (action.type) {\r\n    case WS_CONNECTION_START: {\r\n      return {\r\n        ...state,\r\n        wsConnected: false\r\n      };\r\n    }\r\n    case WS_CONNECTION_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        error: undefined,\r\n        wsConnected: true\r\n      };\r\n    }\r\n    case WS_CONNECTION_ERROR: {\r\n      return {\r\n        ...state,\r\n        error: action.payload,\r\n        wsConnected: false\r\n      };\r\n    }\r\n    case WS_CONNECTION_CLOSED: {\r\n      return {\r\n        ...state,\r\n        error: undefined,\r\n        wsConnected: false\r\n      };\r\n    }\r\n    case WS_GET_MESSAGE: {\r\n      return {\r\n        ...state,\r\n        error: undefined,\r\n        total: action.payload.total,\r\n        totalToday: action.payload.totalToday,\r\n        orders: action.payload.orders\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import { combineReducers,Action, ActionCreator } from 'redux';\r\nimport { ThunkAction } from 'redux-thunk';\r\nimport { burgerIngredientsReducer } from './burgerIngredients';\r\nimport { burgerConstructorReducer } from './burgerConstructor';\r\nimport { orderReducer } from './order';\r\nimport { userReducer } from './user';\r\nimport { ordersReducer } from './orders';\r\nimport { store } from '../../index';\r\n\r\nexport const rootReducer = combineReducers({\r\n  burgerIngredients: burgerIngredientsReducer,\r\n  burgerConstructor: burgerConstructorReducer,\r\n  order: orderReducer,\r\n  orders: ordersReducer,\r\n  user: userReducer,\r\n});\r\n\r\nexport type RootState = ReturnType<typeof rootReducer>;\r\nexport type AppThunk<ReturnType = void> = ActionCreator<ThunkAction<ReturnType, RootState, unknown, Action>>;\r\nexport type AppDispatch = typeof store.dispatch;","import { WS_CONNECTION_START, WS_CONNECTION_CLOSED, WS_CONNECTION_ERROR, WS_CONNECTION_SUCCESS, WS_GET_MESSAGE, WS_SEND_MESSAGE } from '../types';\r\nimport { TOrder } from '../../utils/types';\r\n\r\ntype TWSConnectionStart = { readonly type: typeof WS_CONNECTION_START; readonly payload: string };\r\ntype TWSConnectionClosed = { readonly type: typeof WS_CONNECTION_CLOSED; readonly payload?: any };\r\ntype TWSConnectionError = { readonly type: typeof WS_CONNECTION_ERROR; readonly payload: Event };\r\ntype TWSConnectionSuccess = { readonly type: typeof WS_CONNECTION_SUCCESS; readonly payload?: any };\r\ntype TWSConnectionGetMessage = {\r\n  readonly type: typeof WS_GET_MESSAGE;\r\n  readonly payload: { total: number; totalToday: number; orders: Array<TOrder> };\r\n};\r\ntype TWSConnectionSendMessage = { readonly type: typeof WS_SEND_MESSAGE; readonly payload?: any };\r\n\r\nexport interface IWsActionTypes {\r\n\twsInit: \"WS_CONNECTION_START\";\r\n\tonOpen: \"WS_CONNECTION_SUCCESS\";\r\n\tonClose: \"WS_CONNECTION_CLOSED\";\r\n\tonError: \"WS_CONNECTION_ERROR\";\r\n\tonMessage: \"WS_GET_MESSAGE\";\r\n  }\r\n\r\nexport const wsActions: IWsActionTypes = {\r\n\twsInit: WS_CONNECTION_START,\r\n\tonOpen: WS_CONNECTION_SUCCESS,\r\n\tonClose: WS_CONNECTION_CLOSED,\r\n\tonError: WS_CONNECTION_ERROR,\r\n\tonMessage: WS_GET_MESSAGE\r\n  };\r\n\r\n\r\nexport type TWSActions =\r\n  | TWSConnectionStart\r\n  | TWSConnectionSuccess\r\n  | TWSConnectionSendMessage\r\n  | TWSConnectionGetMessage\r\n  | TWSConnectionError\r\n  | TWSConnectionClosed;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App/App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport { compose, createStore, applyMiddleware } from 'redux';\r\nimport { Provider } from 'react-redux';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport thunk from 'redux-thunk';\r\nimport { rootReducer } from './services/reducers';\r\nimport { socketMiddleware } from './services/middlewares/socketMiddleware';\r\nimport { wsActions } from './services/actions/orders';\r\n\r\ndeclare global {\r\n  interface Window {\r\n    __REDUX_DEVTOOLS_EXTENSION_COMPOSE__?: typeof compose;\r\n  }\r\n}\r\n\r\nconst composeEnhancers =\r\n  typeof window === 'object' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\r\n    ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({} as any)\r\n    : compose;\r\n\r\nconst enhancer = composeEnhancers(applyMiddleware(thunk, socketMiddleware(wsActions)));\r\n\r\nexport const store = createStore(rootReducer, enhancer);\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <Provider store={store}>\r\n        <App />\r\n      </Provider>\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root'),\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","import type { Middleware, MiddlewareAPI } from 'redux';\r\nimport { TWSActions, IWsActionTypes } from '../actions/orders';\r\nimport type { AppDispatch, RootState } from '../reducers';\r\nimport { WS_CONNECTION_CLOSED, WS_CONNECTION_ERROR, WS_CONNECTION_START, WS_CONNECTION_SUCCESS, WS_GET_MESSAGE } from '../types';\r\n\r\nexport const socketMiddleware = (wsActions: IWsActionTypes): Middleware => {\r\n  return ((store: MiddlewareAPI<AppDispatch, RootState>) => {\r\n    let socket: WebSocket | null = null;\r\n    return next => (action: TWSActions) => {\r\n\t\tconst { wsInit, onOpen, onClose, onError, onMessage } = wsActions;\r\n      const { dispatch, getState } = store;\r\n      const { type, payload } = action;\r\n\r\n      if (type === wsInit) socket = new WebSocket(payload);\r\n      if (socket) {\r\n        socket.onopen = event => dispatch({ type: onOpen, payload: event });\r\n        socket.onerror = event => dispatch({ type: onError, payload: event });\r\n        socket.onclose = event => dispatch({ type: onClose, payload: event });\r\n        socket.onmessage = event => dispatch({ type: onMessage, payload: JSON.parse(event.data) });\r\n      }\r\n      next(action);\r\n    };\r\n  }) as Middleware;\r\n};\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Feed_container__3QtJB\",\"list\":\"Feed_list__5Gq-1\",\"ordersBlock\":\"Feed_ordersBlock__1NP46\",\"ordersInfo\":\"Feed_ordersInfo__1eSRx\",\"ordersNumbers\":\"Feed_ordersNumbers__1ZN9O\",\"ordersReady\":\"Feed_ordersReady__2pyat\",\"ordersInWork\":\"Feed_ordersInWork__14tzc\",\"orderNumberReady\":\"Feed_orderNumberReady__2rn6T\",\"largeNumber\":\"Feed_largeNumber__1EQPI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"OrderCard_card__2-vaX\",\"orderAndDate\":\"OrderCard_orderAndDate__ubTmP\",\"price\":\"OrderCard_price__147ia\",\"imgBlock\":\"OrderCard_imgBlock__vvrh3\",\"img\":\"OrderCard_img__1w-nC\",\"extra\":\"OrderCard_extra__3y1w-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"IngredientDetails_container__1m4AM\",\"image\":\"IngredientDetails_image__3cPoH\",\"details\":\"IngredientDetails_details__1VpLp\",\"detail\":\"IngredientDetails_detail__2pNcz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"AppHeader_header__1DE8H\",\"nav\":\"AppHeader_nav__1zVDo\",\"navBtn\":\"AppHeader_navBtn__1lMrP\",\"container\":\"AppHeader_container__3svZR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Ingredient_container__rDHJt\",\"name\":\"Ingredient_name__gqM8h\",\"price\":\"Ingredient_price__1vxAq\",\"priceValue\":\"Ingredient_priceValue__14VTK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"block\":\"Login_block__1x_y_\",\"form\":\"Login_form__L31_W\",\"info\":\"Login_info__30PyK\",\"link\":\"Login_link__1Y0oM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"BurgerIngredients_container__1lO3t\",\"nav\":\"BurgerIngredients_nav__3Va8N\",\"navBtn\":\"BurgerIngredients_navBtn__JVW4q\",\"navBtn_active\":\"BurgerIngredients_navBtn_active__qwcd8\",\"ingredientsBlock\":\"BurgerIngredients_ingredientsBlock__151eR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"OrderDetails_container__3oKxc\",\"orderId\":\"OrderDetails_orderId__1XJji\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"block\":\"Register_block__gbpZ0\",\"form\":\"Register_form__1duFK\",\"link\":\"Register_link__h5fO6\",\"info\":\"Register_info__qoSVx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"block\":\"ForgotPassword_block__3heOO\",\"form\":\"ForgotPassword_form__2ksKc\",\"link\":\"ForgotPassword_link__26YIl\",\"info\":\"ForgotPassword_info__1G1mt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"block\":\"ResetPassword_block__3r6sq\",\"form\":\"ResetPassword_form__32PIB\",\"link\":\"ResetPassword_link__u6d5e\",\"info\":\"ResetPassword_info__2prJe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"FeedDetails_container__2hN4W\",\"list\":\"FeedDetails_list__1uNqX\",\"img\":\"FeedDetails_img__3k_Mw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"Modal_modal__1qRWO\",\"title\":\"Modal_title__1ErQm\",\"close\":\"Modal_close__3bucL\"};"],"sourceRoot":""}