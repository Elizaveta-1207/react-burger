(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{103:function(e,t,n){e.exports={main:"App_main__3epDF"}},105:function(e,t,n){e.exports={container:"IngredientsContainer_container__1L1gA"}},106:function(e,t,n){e.exports={circle:"Counter_circle__2YgUo"}},108:function(e,t,n){e.exports={container:"ModalOverlay_container__3BK1i"}},117:function(e,t,n){},12:function(e,t,n){e.exports={container:"BurgerConstructor_container__3AYG7",block:"BurgerConstructor_block__1xOds",block_hovered:"BurgerConstructor_block_hovered__2O0hv",list:"BurgerConstructor_list__h6Ja7",sumBlock:"BurgerConstructor_sumBlock__2SBRY",sum:"BurgerConstructor_sum__1LLJo",ingredients:"BurgerConstructor_ingredients__GiCz4",elem:"BurgerConstructor_elem__fCOAl",empty:"BurgerConstructor_empty__13LqY",btn_disabled:"BurgerConstructor_btn_disabled__30C4C"}},19:function(e,t,n){e.exports={block:"Profile_block__F9bzc",nav:"Profile_nav__3tXDM",navBar:"Profile_navBar__20ME6",navLink:"Profile_navLink__2-KB4",activeNavLink:"Profile_activeNavLink__11WxI",navText:"Profile_navText__2fOSP",profileBlock:"Profile_profileBlock__26GYe",ordersBlock:"Profile_ordersBlock__1q0wI"}},202:function(e,t,n){"use strict";n.r(t),n.d(t,"store",(function(){return Lt}));var r=n(1),c=n.n(r),a=n(35),i=n.n(a),s=(n(117),n(5)),o=n(43),l=o.c,d=function(){return Object(o.b)()},u=n(110),j=n(207),m=n(10),b=n(103),p=n.n(b),_=n(7),x=n(4),O=n(31),h=n.n(O),f=n(0);var v=function(){var e=Object(m.h)().pathname;return Object(f.jsx)("header",{className:"".concat(h.a.header," p-4"),children:Object(f.jsxs)("div",{className:"".concat(h.a.container),children:[Object(f.jsxs)("nav",{className:"".concat(h.a.nav),children:[Object(f.jsxs)(_.c,{exact:!0,to:"/",className:"".concat(h.a.navBtn," mr-2"),children:[Object(f.jsx)(x.BurgerIcon,{type:"".concat("/"===e?"primary":"secondary")}),Object(f.jsx)("p",{className:"text text_type_main-default pl-2 mr-5 ".concat("/"===e?"":"text_color_inactive"),children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]}),Object(f.jsxs)(_.c,{to:"/feed",className:"".concat(h.a.navBtn," ml-5"),children:[Object(f.jsx)(x.ListIcon,{type:"".concat("/feed"===e?"primary":"secondary")}),Object(f.jsx)("p",{className:"text text_type_main-default pl-2 mr-5 ".concat("/feed"===e?"":"text_color_inactive"),children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})]}),Object(f.jsx)(_.b,{to:"/",children:Object(f.jsx)(x.Logo,{})}),Object(f.jsxs)(_.c,{to:"/profile",className:"".concat(h.a.navBtn," ml-5"),children:[Object(f.jsx)(x.ProfileIcon,{type:"".concat("/profile"===e?"primary":"secondary")}),Object(f.jsx)("p",{className:"text text_type_main-default pl-2 ".concat("/profile"===e?"":"text_color_inactive"),children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})]})})},g=n(44),y=n.n(g),N=n(105),C=n.n(N),E=n(208),k=n(36),I=n.n(k),R=n(106),T=n.n(R);var S=function(e){var t=e.amount;return Object(f.jsx)(f.Fragment,{children:t>0?Object(f.jsx)("div",{className:T.a.circle,children:Object(f.jsx)("p",{className:"text text_type_digits-default",children:t})}):null})};var w=function(e){var t=e._id,n=e.type,c=e.image,a=e.price,i=e.name,o=Object(m.g)(),d=Object(m.h)(),u=l((function(e){return e.burgerConstructor})),j=u.constructorBuns,b=u.constructorIngredients,p=l((function(e){return e.burgerIngredients.ingredients})).filter((function(e){return"bun"===e.type})),_=Object(r.useMemo)((function(){var e=0;return b.forEach((function(n){n._id===t&&(e+=1)})),e}),[b,t]),O=Object(r.useMemo)((function(){return j||b.length>0?j?j._id===t?2:0:p[0]._id===t?2:0:0}),[j,b,p,t]),h=Object(E.a)({type:"ingredient",item:{_id:t,name:i,type:n,image:c,price:a},collect:function(e){return{opacity:e.isDragging()?.2:1}}}),v=Object(s.a)(h,2),g=v[0].opacity,y=v[1];return Object(f.jsxs)("div",{className:"".concat(I.a.container," mb-8"),onClick:function(){o.replace({pathname:"/ingredients/".concat(t),state:{backIngredient:d}})},ref:y,style:{opacity:"".concat(g)},children:[Object(f.jsx)(S,{amount:"bun"===n?O:_}),Object(f.jsx)("img",{src:c,alt:"burger-ingredient",className:"".concat(I.a.image," pl-4 pr-4")}),Object(f.jsxs)("div",{className:"".concat(I.a.price," mt-1"),children:[Object(f.jsx)("p",{className:"text text_type_digits-default ".concat(I.a.priceValue),children:a}),Object(f.jsx)(x.CurrencyIcon,{type:"primary"})]}),Object(f.jsx)("p",{className:"text text_type_main-default ".concat(I.a.name," mt-1"),children:i})]})};var B=function(e){var t=e.title,n=e.ingredients;return Object(f.jsxs)("div",{className:"mb-10",children:[Object(f.jsx)("p",{className:"text text_type_main-medium mb-6",children:t}),Object(f.jsx)("div",{className:"".concat(C.a.container," pl-4 pr-4"),children:n.map((function(e){return Object(f.jsx)(w,{_id:e._id,type:e.type,image:e.image,price:e.price,name:e.name,proteins:e.proteins,fat:e.fat,carbohydrates:e.carbohydrates,calories:e.calories},e._id)}))})]})};var U=function(){var e=l((function(e){return e.burgerIngredients.ingredients})),t=Object(r.useState)("bun"),n=Object(s.a)(t,2),c=n[0],a=n[1],i=Object(r.useRef)(null),o=Object(r.useRef)(null),d=Object(r.useRef)(null),u=Object(r.useRef)(null),j=e.filter((function(e){return"bun"===e.type})),m=e.filter((function(e){return"sauce"===e.type})),b=e.filter((function(e){return"main"===e.type})),p=function(e){var t,n,r;a(e),"bun"===e&&(null===(t=o.current)||void 0===t||t.scrollIntoView({behavior:"smooth"})),"sauce"===e&&(null===(n=d.current)||void 0===n||n.scrollIntoView({behavior:"smooth"})),"main"===e&&(null===(r=u.current)||void 0===r||r.scrollIntoView({behavior:"smooth"}))},_=[{title:"\u0411\u0443\u043b\u043a\u0438",ingredients:j,refName:o},{title:"\u0421\u043e\u0443\u0441\u044b",ingredients:m,refName:d},{title:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438",ingredients:b,refName:u}];return Object(f.jsxs)("div",{className:"".concat(y.a.container," mr-10"),children:[Object(f.jsx)("p",{className:"".concat(y.a.title," text text_type_main-large mt-10 mb-5"),children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(f.jsxs)("div",{className:"".concat(y.a.nav),ref:i,children:[Object(f.jsx)(x.Tab,{value:"bun",active:"bun"===c,onClick:function(){return p("bun")},children:"\u0411\u0443\u043b\u043a\u0438"}),Object(f.jsx)(x.Tab,{value:"sauce",active:"sauce"===c,onClick:function(){return p("sauce")},children:"\u0421\u043e\u0443\u0441\u044b"}),Object(f.jsx)(x.Tab,{value:"main",active:"main"===c,onClick:function(){return p("main")},children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})]}),Object(f.jsx)("div",{className:"".concat(y.a.ingredientsBlock," mt-10"),onScroll:function(){var e,t,n,r,c,s,l,j,m=null!==(e=null===(t=i.current)||void 0===t?void 0:t.getBoundingClientRect().top)&&void 0!==e?e:0,b=null!==(n=null===(r=o.current)||void 0===r?void 0:r.getBoundingClientRect().top)&&void 0!==n?n:0,p=null!==(c=null===(s=d.current)||void 0===s?void 0:s.getBoundingClientRect().top)&&void 0!==c?c:0,_=null!==(l=null===(j=u.current)||void 0===j?void 0:j.getBoundingClientRect().top)&&void 0!==l?l:0,x=Math.abs(m-b),O=Math.abs(m-p),h=Math.abs(m-_),f=Math.min(x,O,h);a(f===x?"bun":f===O?"sauce":"main")},children:_.map((function(e,t){return Object(f.jsx)("div",{ref:e.refName,children:Object(f.jsx)(B,{title:e.title,ingredients:e.ingredients})},t)}))})]})},A=n(25),P=n(209),D=n(12),L=n.n(D),M=n(32),F=n.n(M),G=n(59),q=n(2),V="REGISTER_REQUEST",z="REGISTER_SUCCESS",J="REGISTER_FAILED",H="AUTH_REQUEST",W="AUTH_SUCCESS",Q="AUTH_FAILED",X="LOGOUT_REQUEST",K="LOGOUT_SUCCESS",Y="LOGOUT_FAILED",Z="GET_USER_REQUEST",$="GET_USER_SUCCESS",ee="GET_USER_FAILED",te="USER_UPDATE_REQUEST",ne="USER_UPDATE_SUCCESS",re="USER_UPDATE_FAILED",ce=function(){var e=le("refreshToken");return fetch("".concat(ie,"/auth/token"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({token:"".concat(e)})}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},ae=function(e){var t=e.email,n=e.password,r=e.history;return function(e){e({type:H}),fetch("".concat(ie,"/auth/login"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({email:t,password:n})}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(t){if(t.success){var n=t.accessToken.split("Bearer ")[1];de("accessToken",n),de("refreshToken",t.refreshToken),e((c=t.user,{type:W,payload:c})),r.push("/")}else Promise.reject(t);var c})).catch((function(){return e({type:Q})}))}},ie="https://norma.nomoreparties.space/api",se="wss://norma.nomoreparties.space/orders",oe=/^([a-zA-Z0-9_\-\.]+)@([a-zA-Z0-9_\-\.]+)\.([a-zA-Z]{2,5})$/,le=function(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0},de=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(n=Object(q.a)({path:"/",expires:"Fri, 31 Dec 9999 23:59:59 GMT"},n)).expires;if("number"==typeof r&&r){var c=new Date;c.setTime(c.getTime()+1e3*r),r=n.expires=c}r&&r.toUTCString&&(n.expires=r.toUTCString());var a=e+"="+(t=encodeURIComponent(t));for(var i in n){a+="; "+i;var s=n[i];!0!==s&&(a+="="+s)}document.cookie=a},ue=function(){var e=Object(G.a)(F.a.mark((function e(t,n){var r,c;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,n).then(function(){var e=Object(G.a)(F.a.mark((function e(t){var n;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=2;break}return e.abrupt("return",t.json());case 2:return e.next=4,t.json();case 4:return n=e.sent,e.next=7,Promise.reject(n);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case 19:return e.abrupt("return",e.sent);case 6:if(e.prev=6,e.t0=e.catch(0),"jwt expired"!==e.t0.message){e.next=22;break}return e.next=11,ce();case 11:return r=e.sent,c=r.accessToken.split("Bearer ")[1],de("accessToken",c),de("refreshToken",r.refreshToken),n.headers||(n.headers={}),n.headers.authorization=le("accessToken"),e.next=19,fetch(t,n).then(function(){var e=Object(G.a)(F.a.mark((function e(t){var n;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=2;break}return e.abrupt("return",t.json());case 2:return e.next=4,t.json();case 4:return n=e.sent,e.next=7,Promise.reject(n);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 22:throw e.t0;case 23:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),je=function(e){var t=new Date;return e.slice(0,10)===t.toISOString().slice(0,10)?"\u0421\u0435\u0433\u043e\u0434\u043d\u044f, ".concat(e.slice(11,16)," i-GMT+3"):"".concat(e.slice(0,10),", ").concat(e.slice(11,16)," i-GMT+3")},me=function(e){de(e,null,{expires:-1})},be="GET_ORDER_REQUEST",pe="GET_ORDER_SUCCESS",_e="GET_ORDER_ERROR",xe="RESET_ORDER",Oe=function(e){return function(t){var n=le("accessToken");t({type:be}),ue("".concat(ie,"/orders"),{method:"POST",headers:{"Content-type":"application/json",authorization:"Bearer ".concat(n)},body:JSON.stringify({ingredients:e})}).then((function(e){return t({type:pe,payload:e.order.number})})).catch((function(){return t({type:_e})}))}},he="ADD_CONSTRUCTOR_INGREDIENT",fe="DELETE_CONSTRUCTOR_INGREDIENT",ve="INCREASE_CONSTRUCTOR_AMOUNT",ge="DECREASE_CONSTRUCTOR_AMOUNT",ye="ADD_CONSTRUCTOR_BUN",Ne="MOVE_CONSTRUCTOR_INGREDIENTS",Ce=function(){return{type:ve}},Ee=function(){return{type:ge}},ke=function(e){var t=e.children,n=e.index,c=d(),a=Object(r.useRef)(null),i=Object(P.a)({accept:"card",hover:function(e,t){if(a.current){var r=e.index,i=n;if(r!==i){var s=a.current.getBoundingClientRect(),o=(s.bottom-s.top)/2,l=t.getClientOffset().y-s.top;r<i&&l<o||r>i&&l>o||(c(function(e,t){return{type:Ne,payload:{dragIndex:e,hoverIndex:t}}}(r,i)),e.index=i)}}}}),o=Object(s.a)(i,2)[1],l=Object(E.a)({type:"card",item:{index:n},collect:function(e){return{isDragging:e.isDragging()}}}),u=Object(s.a)(l,2),j=u[0].isDragging?0:1;return(0,u[1])(o(a)),Object(f.jsx)("div",{ref:a,style:{opacity:"".concat(j)},children:t})};var Ie=function(e){var t=e.onModalOpen,n=d(),c=Object(m.g)(),a=l((function(e){return e.user})).isAuth,i=l((function(e){return e.burgerIngredients.ingredients})),o=Object(r.useMemo)((function(){return i&&i.filter((function(e){return"bun"===e.type}))}),[i]),u=o.length>0?2*o[0].price:0,j=l((function(e){return e.burgerConstructor})),b=j.constructorBuns,p=j.constructorIngredients,_=Object(r.useMemo)((function(){var e=0;return p.forEach((function(t){"bun"!==t.type&&(e+=t.price)})),b?e+2*b.price:e}),[b,p]),O=function(e){n(function(e){return{type:fe,payload:e}}(e)),n(Ee())},h=Object(P.a)({accept:"ingredient",collect:function(e){return{isHover:e.isOver()}},drop:function(e){"bun"===e.type?n(function(e){var t=Math.trunc(1e8*Math.random());return e.key=t,{type:ye,payload:e}}(e)):n(function(e){var t=Math.trunc(1e8*Math.random());return e.key=t,{type:he,payload:e}}(e)),b&&"bun"===e.type?(n(Ce()),n(Ee())):n(Ce())}}),v=Object(s.a)(h,2),g=v[0].isHover,y=v[1];return Object(f.jsxs)("div",{id:"burgerConstructor-container",className:"".concat(L.a.container," pt-25 pl-4"),children:[Object(f.jsx)("div",{ref:y,className:"".concat(L.a.block," ").concat(g&&L.a.block_hovered),children:b||p.length>0?Object(f.jsxs)("div",{className:"".concat(L.a.ingredients),children:[Object(f.jsx)("div",{className:"".concat(L.a.elem," ml-8"),children:Object(f.jsx)(x.ConstructorElement,{type:"top",isLocked:!0,text:"".concat(b?b.name:o[0].name+" \u043c\u043e\u0436\u043d\u043e \u0437\u0430\u043c\u0435\u043d\u0438\u0442\u044c"," (\u0432\u0435\u0440\u0445)"),price:b?b.price:o[0].price,thumbnail:"".concat(b?b.image:o[0].image)})}),Object(f.jsx)("div",{className:"".concat(L.a.list),children:p.map((function(e,t){return"bun"!==e.type&&Object(f.jsx)(ke,{index:t,children:Object(f.jsxs)("div",{className:"".concat(L.a.elem),children:[Object(f.jsx)("div",{className:"".concat(L.a.drag," mr-2"),children:Object(f.jsx)(x.DragIcon,{type:"primary"})}),Object(f.jsx)(x.ConstructorElement,{text:e.name,price:e.price,thumbnail:void 0!==e.image?e.image:"",handleClose:function(){return O(e.key)}})]})},e.key)}))}),Object(f.jsx)("div",{className:"".concat(L.a.elem," ml-8"),children:Object(f.jsx)(x.ConstructorElement,{type:"bottom",isLocked:!0,text:"".concat(b?b.name:o[0].name+" \u043c\u043e\u0436\u043d\u043e \u0437\u0430\u043c\u0435\u043d\u0438\u0442\u044c"," (\u043d\u0438\u0437)"),price:b?b.price:o[0].price,thumbnail:"".concat(b?b.image:o[0].image)})})]}):Object(f.jsx)("div",{className:"".concat(L.a.empty),children:Object(f.jsx)("h2",{className:"text text_type_main-large",children:"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0438\u043d\u0433\u0440\u0438\u0434\u0438\u0435\u043d\u0442\u044b"})})}),Object(f.jsxs)("div",{className:"".concat(L.a.sumBlock," mr-4 mt-10"),children:[Object(f.jsxs)("div",{className:"".concat(L.a.sum," mr-10"),children:[Object(f.jsx)("p",{className:"text text_type_digits-medium mr-2 ".concat(L.a.sumValue),children:b||p.length>0?b?_:_+u:0}),Object(f.jsx)(x.CurrencyIcon,{type:"primary"})]}),Object(f.jsx)("div",{className:"".concat(!_&&L.a.btn_disabled," "),children:Object(f.jsx)(x.Button,{type:"primary",size:"large",onClick:function(){if(!a)return c.replace("/login");var e=p.map((function(e){return e._id}));n(Oe([].concat(Object(A.a)(e),b?[b._id]:[o[0]._id]))),t()},disabled:!_,children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})})]})]})},Re=n(60),Te=n.n(Re),Se=n(108),we=n.n(Se),Be=function(e){var t=e.children,n=e.onModalClose;return Object(f.jsx)("div",{className:we.a.container,onClick:function(e){return e.target===e.currentTarget&&n()},children:t})},Ue=document.getElementById("modals"),Ae=function(e){var t=e.onModalClose,n=e.children,r=e.modalType,a=e.title,s=function(e){"Escape"===e.code&&t()};return c.a.useEffect((function(){return document.addEventListener("keydown",s),function(){return document.removeEventListener("keydown",s)}}),[]),i.a.createPortal(Object(f.jsx)(Be,{onModalClose:t,children:Object(f.jsxs)("div",{id:"modal",className:"".concat(Te.a.modal),children:[Object(f.jsxs)("div",{className:"".concat(Te.a.title," pt-10 pl-10 pr-10"),style:{justifyContent:"ingredient"===r?"space-between":"end"},children:["ingredient"===r&&Object(f.jsx)("p",{className:"text text_type_main-large",children:a}),Object(f.jsx)("div",{className:"".concat(Te.a.close," pt-10  pr-10"),children:Object(f.jsx)("div",{id:"close-btn",children:Object(f.jsx)(x.CloseIcon,{type:"primary",onClick:t})})})]}),n]})}),Ue)},Pe=n(27),De=n.n(Pe);var Le=function(){var e,t=Object(m.h)(),n=Object(m.i)().id,r=l((function(e){return e.burgerIngredients.ingredients})),a=l((function(e){return e.burgerIngredients})).isIngredientsLoaded,i=c.a.useMemo((function(){return r.find((function(e){return e._id===n}))}),[r]);return a?a&&!i?Object(f.jsx)(m.a,{to:"/"}):Object(f.jsxs)("div",{className:"".concat(De.a.container," pb-15"),style:{height:"".concat(!(null===(e=t.state)||void 0===e?void 0:e.backIngredient)&&"calc(100vh - 86px)")},children:[Object(f.jsx)("img",{src:null===i||void 0===i?void 0:i.image,alt:"ingredient-icon",className:De.a.image}),Object(f.jsx)("p",{id:"ingredient-name",className:"text text_type_main-medium mt-4",style:{textAlign:"center"},children:null===i||void 0===i?void 0:i.name}),Object(f.jsxs)("div",{className:"".concat(De.a.details," mt-8"),children:[Object(f.jsxs)("div",{id:"calories",className:"".concat(De.a.detail," mr-5"),children:[Object(f.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438,\u043a\u043a\u0430\u043b"}),Object(f.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:null===i||void 0===i?void 0:i.calories})]}),Object(f.jsxs)("div",{id:"proteins",className:"".concat(De.a.detail," mr-5"),children:[Object(f.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(f.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:null===i||void 0===i?void 0:i.proteins})]}),Object(f.jsxs)("div",{id:"fat",className:"".concat(De.a.detail," mr-5"),children:[Object(f.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(f.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:null===i||void 0===i?void 0:i.fat})]}),Object(f.jsxs)("div",{id:"carbohydrates",className:De.a.detail,children:[Object(f.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(f.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:null===i||void 0===i?void 0:i.carbohydrates})]})]})]}):null},Me=n(45),Fe=n.n(Me),Ge=n.p+"static/media/done.cc5a59a7.gif";var qe=function(){var e=l((function(e){return e.order})),t=e.orderNumber,n=e.isOrderLoading;return Object(f.jsx)(f.Fragment,{children:n?Object(f.jsx)("div",{className:Fe.a.container,style:{justifyContent:"center"},children:Object(f.jsx)("h1",{className:"text text_type_main-large",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})}):Object(f.jsxs)("div",{className:"".concat(Fe.a.container," pb-30"),children:[Object(f.jsx)("h3",{className:"text text_type_digits-large ".concat(Fe.a.orderId),children:t}),Object(f.jsx)("p",{className:"text text_type_main-medium mt-8 ".concat(Fe.a.orderIdText),children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(f.jsx)("img",{src:Ge,alt:"done-icon",className:"mt-15"}),Object(f.jsx)("p",{className:"text text_type_main-default mt-15",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(f.jsx)("p",{className:"text text_type_main-default text_color_inactive mt-2",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})})},Ve="GET_BURGER_INGREDIENTS_REQUEST",ze="GET_BURGER_INGREDIENTS_SUCCESS",Je="GET_BURGER_INGREDIENTS_ERROR",He=function(){return{type:Je}},We=function(){return function(e){e({type:Ve}),fetch("".concat(ie,"/ingredients")).then((function(t){if(t.ok)return t.json();e(He())})).then((function(t){return e((n=t.data,{type:ze,payload:n}));var n})).catch((function(){return e(He())}))}},Qe=n(37),Xe=n.n(Qe);var Ke=function(){var e,t,n=d(),r=Object(m.g)(),a=Object(m.h)(),i=l((function(e){return e.user})),o=i.isAuth,u=i.getUserRequest,j=c.a.useState(""),b=Object(s.a)(j,2),p=b[0],O=b[1],h=c.a.useState(""),v=Object(s.a)(h,2),g=v[0],y=v[1],N=function(e){var t=e.target;"email"===t.name?O(t.value):y(t.value)};return u&&o?Object(f.jsx)(m.a,{to:{pathname:null!==(e=null===(t=a.state)||void 0===t?void 0:t.from)&&void 0!==e?e:"/profile"}}):Object(f.jsxs)("div",{className:Xe.a.block,children:[Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n(ae({email:p,password:g,history:r}))},noValidate:!0,className:Xe.a.form,children:[Object(f.jsx)("h2",{className:"text text_type_main-medium",children:"\u0412\u0445\u043e\u0434"}),Object(f.jsx)(x.EmailInput,{name:"email",value:p||"",onChange:N}),Object(f.jsx)(x.PasswordInput,{name:"password",value:g||"",onChange:N}),Object(f.jsx)(x.Button,{type:"primary",size:"medium",disabled:!p||!g,children:"\u0412\u043e\u0439\u0442\u0438"})]}),Object(f.jsxs)("div",{className:"".concat(Xe.a.info),children:[Object(f.jsxs)("div",{className:"text text_type_main-default text_color_inactive mb-4",children:[Object(f.jsx)("span",{children:"\u0412\u044b \u2014 \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?"}),Object(f.jsx)(_.b,{to:"/register",className:"".concat(Xe.a.link," ml-2"),children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(f.jsxs)("div",{className:"text text_type_main-default text_color_inactive",children:[Object(f.jsx)("span",{children:"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(f.jsx)(_.b,{to:"/forgot-password",className:"".concat(Xe.a.link," ml-2"),children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})]})},Ye=n(46),Ze=n.n(Ye);var $e=function(){var e,t=d(),n=Object(m.g)(),r=Object(m.h)(),a=l((function(e){return e.user})),i=(a.user,a.isAuth),o=a.getUserRequest,u=a.errorText,j=a.registerError,b=c.a.useState(""),p=Object(s.a)(b,2),O=p[0],h=p[1],v=c.a.useState(""),g=Object(s.a)(v,2),y=g[0],N=g[1],C=c.a.useState(""),E=Object(s.a)(C,2),k=E[0],I=E[1],R=c.a.useState(!1),T=Object(s.a)(R,2),S=T[0],w=T[1],B=function(e){var t=e.target;"email"===t.name?N(t.value):"username"===t.name?h(t.value):I(t.value)};return c.a.useEffect((function(){return y.length>0&&!y.match(oe)?w(!0):w(!1)}),[y]),o?null:!o&&i?Object(f.jsx)(m.a,{to:(null===(e=r.state)||void 0===e?void 0:e.from)||"/profile"}):Object(f.jsxs)("div",{className:Ze.a.block,children:[Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(function(e){var t=e.email,n=e.password,r=e.name,c=e.history;return function(e){e({type:V}),fetch("".concat(ie,"/auth/register"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({email:t,password:n,name:r})}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(t){t.success?(e({type:z}),c.push("/login")):Promise.reject(t)})).catch((function(){return e({type:J})}))}}({email:y,name:O,password:k,history:n}))},noValidate:!0,className:Ze.a.form,children:[Object(f.jsx)("h2",{className:"text text_type_main-medium",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(f.jsx)(x.Input,{type:"text",placeholder:"\u0418\u043c\u044f",name:"username",value:O||"",onChange:B}),Object(f.jsx)(x.Input,{type:"email",placeholder:"E-mail",name:"email",value:y||"",onChange:B,error:S,errorText:"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 email"}),Object(f.jsx)(x.PasswordInput,{name:"password",value:k||"",onChange:B}),Object(f.jsx)(x.Button,{type:"primary",size:"medium",disabled:!y||S||!k||!O||j,children:"\u0412\u0445\u043e\u0434"}),Object(f.jsx)("p",{className:"text text_type_main-small mt-2",style:{color:"red"},children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"===u&&u})]}),Object(f.jsx)("div",{className:Ze.a.info,children:Object(f.jsxs)("div",{className:"text text_type_main-default text_color_inactive",children:[Object(f.jsx)("span",{children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"}),Object(f.jsx)(_.b,{to:"/login",className:"".concat(Ze.a.link," ml-2"),children:"\u0412\u043e\u0439\u0442\u0438"})]})})]})},et=n(47),tt=n.n(et);var nt=function(){var e,t=Object(m.g)(),n=c.a.useState(""),r=Object(s.a)(n,2),a=r[0],i=r[1],o=c.a.useState(!1),d=Object(s.a)(o,2),u=d[0],j=d[1],b=l((function(e){return e.user})),p=b.isAuth,O=b.getUserRequest,h=Object(m.h)();return O?null:!O&&p?Object(f.jsx)(m.a,{to:(null===(e=h.state)||void 0===e?void 0:e.from)||"/profile"}):Object(f.jsxs)("div",{className:tt.a.block,children:[Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("".concat(ie,"/password-reset"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({email:a})}).then((function(e){if(e.ok)return e.json();j(!0)})).then((function(e){e.success?t.replace("/reset-password",{forgotPageVisited:!0}):j(!0)})).catch((function(){return j(!0)}))},noValidate:!0,className:tt.a.form,children:[Object(f.jsx)("h2",{className:"text text_type_main-medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(f.jsx)(x.Input,{type:"email",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",name:"email",value:a||"",onChange:function(e){var t=e.target;"email"===t.name&&i(t.value)},error:u,errorText:"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 email"}),Object(f.jsx)(x.Button,{type:"primary",size:"medium",disabled:!a||u,children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})]}),Object(f.jsx)("div",{className:tt.a.info,children:Object(f.jsxs)("div",{className:"text text_type_main-default text_color_inactive",children:[Object(f.jsx)("span",{children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(f.jsx)(_.b,{to:"/login",className:"".concat(tt.a.link," ml-2"),children:"\u0412\u043e\u0439\u0442\u0438"})]})})]})},rt=n(48),ct=n.n(rt);var at=function(){var e,t,n=Object(m.g)(),r=Object(m.h)(),a=l((function(e){return e.user})),i=a.isAuth,o=a.getUserRequest,d=c.a.useState(!1),u=Object(s.a)(d,2),j=u[0],b=u[1],p=c.a.useState(""),O=Object(s.a)(p,2),h=O[0],v=O[1],g=c.a.useState(""),y=Object(s.a)(g,2),N=y[0],C=y[1],E=function(e){var t=e.target;"code"===t.name?v(t.value):C(t.value)};return o?null:!o&&i?Object(f.jsx)(m.a,{to:(null===(t=r.state)||void 0===t?void 0:t.from)||"/profile"}):(null===(e=r.state)||void 0===e?void 0:e.forgotPageVisited)?Object(f.jsx)("div",{onClick:function(e){j||"input__icon input__icon-action"===e.currentTarget.classList.value||b(!j)},children:Object(f.jsxs)("div",{className:ct.a.block,children:[Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("".concat(ie,"/password-reset/reset"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({password:N,token:h})}).then((function(e){if(e.ok)return e.json();alert("ERROR")})).then((function(e){e.success?n.replace("/login",{forgotPageVisited:!1}):alert("ERROR")})).catch((function(e){return alert(e)}))},noValidate:!0,className:ct.a.form,children:[Object(f.jsx)("h2",{className:"text text_type_main-medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(f.jsx)(x.Input,{type:j?"password":"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",name:"password",value:N||"",icon:j?"HideIcon":"ShowIcon",onChange:E,onIconClick:function(){b(!j)}}),Object(f.jsx)(x.Input,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",name:"code",value:h||"",onChange:E}),Object(f.jsx)(x.Button,{type:"primary",size:"medium",disabled:!N||!h,children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})]}),Object(f.jsx)("div",{className:ct.a.info,children:Object(f.jsxs)("div",{className:"text text_type_main-default text_color_inactive",children:[Object(f.jsx)("span",{children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(f.jsx)(_.b,{to:"/login",className:"".concat(ct.a.link," ml-2"),children:"\u0412\u043e\u0439\u0442\u0438"})]})})]})}):Object(f.jsx)(m.a,{to:"/forgot-password"})},it=n(19),st=n.n(it),ot=n(24),lt=n.n(ot);var dt=function(e){var t=Object(m.g)(),n=Object(m.h)(),c=l((function(e){return e.burgerIngredients})).ingredients,a=Object(r.useMemo)((function(){var t=0,n=e.ingredients;return c.forEach((function(e){for(var r=0;r<n.length;r++)e._id===n[r]&&(t+=e.price)})),t}),[c,e.ingredients]),i=function(e){var t=[];return null===c||void 0===c||c.map((function(n){e.forEach((function(e){e===n._id&&t.unshift(n.image_mobile)}))})),t}(e.ingredients),s=null===i||void 0===i?void 0:i.reduce((function(e,t){return e.includes(t)?e:[].concat(Object(A.a)(e),[t])}),[]),o=s.reverse().slice(0,6).reverse();return Object(f.jsxs)("div",{className:"".concat(lt.a.card),onClick:function(){"/feed"===n.pathname&&t.replace({pathname:"/feed/".concat(e._id),state:{backFeed:n}}),"/profile/orders"===n.pathname&&t.replace({pathname:"/profile/orders/".concat(e._id),state:{backProfile:n}})},children:[Object(f.jsxs)("div",{className:"".concat(lt.a.orderAndDate," mb-6"),children:[Object(f.jsx)("p",{className:"text text_type_digits-default",children:"#".concat(e.number)}),Object(f.jsx)("p",{className:"text text_type_main-small text_color_inactive",children:je(e.createdAt)})]}),Object(f.jsxs)("p",{className:"text text_type_main-medium mb-6",children:[" ",e.name]}),Object(f.jsxs)("div",{className:lt.a.details,style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(f.jsx)("div",{className:lt.a.imgBlock,children:o.map((function(e,t){return s.length-o.length===0?Object(f.jsx)("img",{src:"".concat(e),alt:"feed",className:lt.a.img,style:{marginRight:0!==t?"-16px":"0"}},t):Object(f.jsxs)("div",{style:{position:"relative"},children:[Object(f.jsx)("img",{src:"".concat(e),alt:"feed",className:lt.a.img,style:{marginRight:0!==t?"-16px":"0"}}),Object(f.jsx)("div",{className:"".concat(0===t?lt.a.extra:""," text text_type_main-default"),children:0===t&&"+"+(s.length-o.length)})]},t)}))}),Object(f.jsxs)("div",{className:lt.a.price,children:[Object(f.jsx)("p",{className:"text text_type_digits-default mr-1",children:a}),Object(f.jsx)(x.CurrencyIcon,{type:"primary"})]})]})]})},ut="WS_CONNECTION_START",jt="WS_CONNECTION_SUCCESS",mt="WS_CONNECTION_ERROR",bt="WS_CONNECTION_CLOSED",pt="WS_GET_MESSAGE";var _t=function(){var e=Object(m.g)(),t=d(),n=l((function(e){return e.user})),r=le("accessToken"),a=l((function(e){return e.orders})).orders,i=c.a.useState(""),o=Object(s.a)(i,2),u=o[0],j=o[1],b=c.a.useState(""),p=Object(s.a)(b,2),O=p[0],h=p[1],v=c.a.useState("54321L"),g=Object(s.a)(v,2),y=g[0],N=g[1],C=function(e){var t=e.target;"email"===t.name?j(t.value):"name"===t.name?h(t.value):N(t.value)};return c.a.useEffect((function(){j(n.user.email),h(n.user.name)}),[n.user]),c.a.useEffect((function(){return t({type:ut,payload:"".concat(se,"/all?token=").concat(r)}),function(){t({type:bt})}}),[r,t]),Object(f.jsxs)("div",{className:st.a.block,children:[Object(f.jsxs)("div",{className:"".concat(st.a.nav),children:[Object(f.jsxs)("nav",{className:st.a.navBar,children:[Object(f.jsx)(_.c,{exact:!0,to:"/profile",className:"text text_type_main-medium text_color_inactive ".concat(st.a.navLink," pt-4 pb-4"),activeClassName:st.a.activeNavLink,children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(f.jsx)(_.c,{to:"/profile/orders",className:"text text_type_main-medium text_color_inactive ".concat(st.a.navLink," pt-4 pb-4"),activeClassName:st.a.activeNavLink,children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(f.jsx)(_.c,{to:"/profile/exit",className:"text text_type_main-medium text_color_inactive ".concat(st.a.navLink," pt-4 pb-4"),activeClassName:st.a.activeNavLink,onClick:function(){t((function(e){var t=le("refreshToken");e({type:X}),fetch("".concat(ie,"/auth/logout"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({token:"".concat(t)})}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(t){t.success?(me("accessToken"),me("refreshToken"),e({type:K})):Promise.reject(t)})).catch((function(){return e({type:Y})}))})),e.replace("/login")},children:"\u0412\u044b\u0445\u043e\u0434"})]}),Object(f.jsx)("p",{className:"text text_type_main-small text_color_inactive ".concat(st.a.navText),children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})]}),Object(f.jsxs)(m.d,{children:[Object(f.jsx)(m.b,{path:"/profile",exact:!0,children:Object(f.jsx)("div",{children:Object(f.jsxs)("div",{className:st.a.profileBlock,children:[Object(f.jsx)(x.Input,{placeholder:"\u0418\u043c\u044f",name:"name",value:O,onChange:C,icon:"EditIcon"}),Object(f.jsx)(x.Input,{placeholder:"\u041b\u043e\u0433\u0438\u043d",name:"email",value:u,onChange:C,icon:"EditIcon"}),Object(f.jsx)(x.Input,{placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",value:y,onChange:C,icon:"EditIcon",type:"password"}),Object(f.jsxs)("div",{style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[Object(f.jsx)(x.Button,{size:"medium",type:"secondary",onClick:function(){j(n.user.email),h(n.user.name),N("54321L")},children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(f.jsx)(x.Button,{size:"medium",type:"primary",onClick:function(){u===n.user.email&&O===n.user.name||t(function(e){var t=e.email,n=e.password,r=e.name;return function(e){var c=le("accessToken");e({type:te}),ue("".concat(ie,"/auth/user"),{method:"PATCH",headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify({email:t,password:n,name:r})}).then((function(t){t.success?e({type:ne,payload:t.user}):Promise.reject(t)})).catch((function(){return e({type:re})}))}}({email:u,name:O,password:y}))},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})})}),Object(f.jsx)(m.b,{path:"/profile/orders",children:Object(f.jsx)("div",{className:"".concat(st.a.ordersBlock),children:a.map((function(e){return Object(f.jsx)(dt,{_id:e._id,createdAt:e.createdAt,updatedAt:e.updatedAt,status:e.status,number:e.number,name:e.name,ingredients:e.ingredients},e._id)}))})})]})]})},xt=n(22),Ot=n.n(xt);var ht=function(){var e=d(),t=l((function(e){return e.orders})),n=t.total,c=t.totalToday,a=t.orders,i=Object(r.useMemo)((function(){return a.filter((function(e){return"done"===e.status})).slice(0,5)}),[a]),s=Object(r.useMemo)((function(){return a.filter((function(e){return"pending"===e.status})).slice(0,10)}),[a]);return Object(r.useEffect)((function(){return e({type:ut,payload:"".concat(se,"/all")}),function(){e({type:bt})}}),[]),Object(f.jsxs)("div",{className:"".concat(Ot.a.container),children:[Object(f.jsxs)("div",{className:"".concat(Ot.a.list," mr-10"),children:[Object(f.jsx)("p",{className:"text text_type_main-large mt-10 mb-5",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(f.jsx)("div",{className:"".concat(Ot.a.ordersBlock),children:a.map((function(e){return Object(f.jsx)(dt,{_id:e._id,createdAt:e.createdAt,updatedAt:e.updatedAt,status:e.status,number:e.number,name:e.name,ingredients:e.ingredients},e._id)}))})]}),Object(f.jsxs)("div",{className:"".concat(Ot.a.ordersInfo," pt-25"),children:[Object(f.jsxs)("div",{className:Ot.a.ordersNumbers,children:[Object(f.jsxs)("div",{className:Ot.a.ordersReady,children:[Object(f.jsx)("p",{className:"text text_type_main-medium mb-4",children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(f.jsx)("div",{children:i.map((function(e){return Object(f.jsx)("p",{className:"text text_type_digits-default ".concat(Ot.a.orderNumberReady," mt-2"),children:e.number},Math.random())}))})]}),Object(f.jsxs)("div",{className:Ot.a.ordersInWork,children:[Object(f.jsx)("p",{className:"text text_type_main-medium mb-4",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(f.jsx)("div",{children:s.map((function(e){return Object(f.jsx)("p",{className:"text text_type_digits-default",children:e.number},Math.random())}))})]})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("p",{className:"text text_type_main-medium mt-15",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(f.jsx)("p",{className:"text text_type_digits-large ".concat(Ot.a.largeNumber),children:n})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("p",{className:"text text_type_main-medium mt-15",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(f.jsx)("p",{className:"text text_type_digits-large ".concat(Ot.a.largeNumber),children:c})]})]})]})},ft=n(49),vt=n.n(ft);var gt=function(){var e,t,n=Object(m.h)(),c=Object(m.i)().id,a=d(),i=l((function(e){return e.orders})).orders,s=l((function(e){return e.burgerIngredients})).ingredients,o=Object(r.useMemo)((function(){return i.find((function(e){return e._id===c}))}),[c,i]),u=function(e){var t=[];return null===o||void 0===o||o.ingredients.map((function(n){e.forEach((function(e){e._id===n&&t.push(e)}))})),t}(s),j=Object(r.useMemo)((function(){var e=0;return u.forEach((function(t){return e+=t.price})),e}),[u]);return Object(r.useEffect)((function(){return n.state||a({type:ut,payload:"".concat(se,"/all")}),function(){n.state||a({type:bt})}}),[]),o?Object(f.jsxs)("div",{className:"pb-10 pl-10 pr-10 ".concat(vt.a.container),style:{height:"".concat((!(null===(e=n.state)||void 0===e?void 0:e.backFeed)||!(null===(t=n.state)||void 0===t?void 0:t.backProfile))&&"calc(100vh - 86px)")},children:[Object(f.jsx)("p",{className:"text text_type_digits-default mb-10",style:{textAlign:"center"},children:"#".concat(null===o||void 0===o?void 0:o.number)}),Object(f.jsxs)("div",{className:"mb-15",children:[Object(f.jsx)("p",{className:"text text_type_main-medium mb-3",children:null===o||void 0===o?void 0:o.name}),Object(f.jsx)("p",{className:"text text_type_main-small",style:{color:"done"===(null===o||void 0===o?void 0:o.status)?"#00CCCC":"#CC0013"},children:"done"===(null===o||void 0===o?void 0:o.status)?"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d":"\u041e\u0442\u043c\u0435\u043d\u0435\u043d"})]}),Object(f.jsx)("p",{className:"text text_type_main-medium mb-6",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(f.jsx)("div",{className:"".concat(vt.a.list," mb-10"),children:u.map((function(e){return Object(f.jsxs)("div",{style:{width:"95%",display:"flex",alignItems:"center",justifyContent:"space-between"},className:"mb-4",children:[Object(f.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(f.jsx)("img",{src:e.image_mobile,alt:"feed",className:vt.a.img}),Object(f.jsx)("span",{className:"text text_type_main-small",children:e.name})]}),Object(f.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(f.jsx)("p",{className:"text text_type_main-medium mr-2",children:e.price}),Object(f.jsx)(x.CurrencyIcon,{type:"primary"})]})]},e._id+Math.random())}))}),Object(f.jsxs)("div",{className:"".concat(vt.a.priceAndDate),style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[Object(f.jsx)("p",{className:"text text_type_main-small text_color_inactive",children:je(o.createdAt)}),Object(f.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(f.jsx)("p",{className:"text text_type_main-medium mr-2",children:j}),Object(f.jsx)(x.CurrencyIcon,{type:"primary"})]})]})]}):null},yt=n(111),Nt=["children"],Ct=function(e){var t=e.children,n=Object(yt.a)(e,Nt),r=l((function(e){return e.user})),c=r.isAuth;return r.getUserRequest&&!c?null:Object(f.jsx)(m.b,Object(q.a)(Object(q.a)({},n),{},{render:function(e){var n=e.location;return c?t:Object(f.jsx)(m.a,{to:{pathname:"/login",state:{from:n.pathname}}})},exact:!0}))},Et=function(){var e,t,n,a,i,o,l,b,_,x=c.a.useState(!1),O=Object(s.a)(x,2),h=O[0],g=O[1],y=c.a.useState(null),N=Object(s.a)(y,2),C=N[0],E=N[1],k=d(),I=Object(m.g)(),R=Object(m.h)(),T=function(){var e,t,n,r,c,a;g(!1),"order"===C&&(k({type:xe}),E(null)),(null===(e=R.state)||void 0===e?void 0:e.backIngredient)&&I.replace(null===(t=R.state)||void 0===t?void 0:t.backIngredient),(null===(n=R.state)||void 0===n?void 0:n.backFeed)&&I.replace(null===(r=R.state)||void 0===r?void 0:r.backFeed),(null===(c=R.state)||void 0===c?void 0:c.backProfile)&&I.replace(null===(a=R.state)||void 0===a?void 0:a.backProfile)},S=Object(r.useCallback)((function(){E("order"),g(!0)}),[]);return c.a.useEffect((function(){le("accessToken")?k((function(e){var t=le("accessToken");e({type:Z}),ue("".concat(ie,"/auth/user"),{headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(t){t.success?e({type:$,payload:t.user}):Promise.reject(t)})).catch((function(){return e({type:ee})}))})):k({type:ee}),k(We())}),[k]),Object(f.jsxs)(f.Fragment,{children:[h&&"order"===C&&Object(f.jsx)(Ae,{onModalClose:T,modalType:C,children:Object(f.jsx)(qe,{})}),Object(f.jsx)(v,{}),Object(f.jsxs)(m.d,{location:null!==(e=null!==(t=null!==(n=null===(a=R.state)||void 0===a?void 0:a.backIngredient)&&void 0!==n?n:null===(i=R.state)||void 0===i?void 0:i.backFeed)&&void 0!==t?t:null===(o=R.state)||void 0===o?void 0:o.backProfile)&&void 0!==e?e:R,children:[Object(f.jsx)(m.b,{path:"/",exact:!0,children:Object(f.jsx)("main",{className:"".concat(p.a.main," pl-4 pr-4 mb-8"),children:Object(f.jsxs)(j.a,{backend:u.a,children:[Object(f.jsx)(U,{}),Object(f.jsx)(Ie,{onModalOpen:S})]})})}),Object(f.jsx)(m.b,{path:"/feed",exact:!0,children:Object(f.jsx)(ht,{})}),Object(f.jsx)(m.b,{path:"/feed/:id",children:Object(f.jsx)(gt,{})}),Object(f.jsx)(m.b,{path:"/profile/orders/:id",children:Object(f.jsx)(gt,{})}),Object(f.jsx)(m.b,{path:"/login",exact:!0,children:Object(f.jsx)(Ke,{})}),Object(f.jsx)(m.b,{path:"/register",exact:!0,children:Object(f.jsx)($e,{})}),Object(f.jsx)(m.b,{path:"/forgot-password",exact:!0,children:Object(f.jsx)(nt,{})}),Object(f.jsx)(m.b,{path:"/reset-password",exact:!0,children:Object(f.jsx)(at,{})}),Object(f.jsx)(Ct,{path:"/profile",children:Object(f.jsx)(_t,{})}),Object(f.jsx)(m.b,{path:"/ingredients/:id",children:Object(f.jsx)(Le,{})})]}),(null===(l=R.state)||void 0===l?void 0:l.backIngredient)&&Object(f.jsx)(m.b,{path:"/ingredients/:id",children:Object(f.jsx)(Ae,{onModalClose:T,modalType:"ingredient",title:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",children:Object(f.jsx)(Le,{})})}),(null===(b=R.state)||void 0===b?void 0:b.backFeed)&&Object(f.jsx)(m.b,{path:"/feed/:id",children:Object(f.jsx)(Ae,{onModalClose:T,modalType:"order",children:Object(f.jsx)(gt,{})})}),(null===(_=R.state)||void 0===_?void 0:_.backProfile)&&Object(f.jsx)(m.b,{path:"/profile/orders/:id",children:Object(f.jsx)(Ae,{onModalClose:T,modalType:"order",children:Object(f.jsx)(gt,{})})})]})},kt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,210)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))},It=n(26),Rt=n(109),Tt={ingredients:[],isIngredientsLoading:!1,isIngredientsGetFailed:!1,isIngredientsLoaded:!1},St={constructorBuns:null,constructorIngredients:[],constructorAmount:0},wt={orderNumber:null,isOrderLoading:!1,isOrderGetFailed:!1},Bt={registerRequest:!1,registerError:!1,authRequest:!1,authError:!1,logoutRequest:!1,logoutError:!1,errorText:null,getUserRequest:!0,getUserError:!1,getUserLoaded:!1,userUpdateRequest:!1,userUpdateError:!1,isAuth:!1,user:null},Ut={ordersAllRequest:!1,ordersAllFailed:!1,total:0,totalToday:0,orders:[],wsConnected:!1},At=Object(It.b)({burgerIngredients:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ve:return Object(q.a)(Object(q.a)({},e),{},{isIngredientsLoading:!0});case ze:return Object(q.a)(Object(q.a)({},e),{},{ingredients:t.payload,isIngredientsLoading:!1,isIngredientsGetFailed:!1,isIngredientsLoaded:!0});case Je:return Object(q.a)(Object(q.a)({},Tt),{},{isIngredientsLoading:!1,isIngredientsGetFailed:!0});default:return e}},burgerConstructor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:St,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case he:return Object(q.a)(Object(q.a)({},e),{},{constructorIngredients:[].concat(Object(A.a)(e.constructorIngredients),[t.payload])});case fe:var n=t.payload,r=e.constructorIngredients.filter((function(e){return e.key!==n}));return Object(q.a)(Object(q.a)({},e),{},{constructorIngredients:r});case ye:return Object(q.a)(Object(q.a)({},e),{},{constructorBuns:t.payload});case ve:return Object(q.a)(Object(q.a)({},e),{},{constructorAmount:e.constructorAmount+1});case ge:return Object(q.a)(Object(q.a)({},e),{},{constructorAmount:e.constructorAmount-1});case Ne:var c=Object(A.a)(e.constructorIngredients);return c.splice(t.payload.hoverIndex,0,c.splice(t.payload.dragIndex,1)[0]),Object(q.a)(Object(q.a)({},e),{},{constructorIngredients:c});default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case be:return Object(q.a)(Object(q.a)({},e),{},{isOrderLoading:!0});case pe:return Object(q.a)(Object(q.a)({},e),{},{orderNumber:t.payload,isOrderLoading:!1,isOrderGetFailed:!1});case _e:return Object(q.a)(Object(q.a)({},wt),{},{isOrderLoading:!1,isOrderGetFailed:!0});case xe:return Object(q.a)(Object(q.a)({},wt),{},{orderNumber:null,isOrderLoading:!1,isOrderGetFailed:!1});default:return e}},orders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ut:return Object(q.a)(Object(q.a)({},e),{},{wsConnected:!1});case jt:return Object(q.a)(Object(q.a)({},e),{},{error:void 0,wsConnected:!0});case mt:return Object(q.a)(Object(q.a)({},e),{},{error:t.payload,wsConnected:!1});case bt:return Object(q.a)(Object(q.a)({},e),{},{error:void 0,wsConnected:!1});case pt:return Object(q.a)(Object(q.a)({},e),{},{error:void 0,total:t.payload.total,totalToday:t.payload.totalToday,orders:t.payload.orders});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:return Object(q.a)(Object(q.a)({},e),{},{registerRequest:!0});case z:return Object(q.a)(Object(q.a)({},e),{},{registerRequest:!1,registerError:!1,errorText:""});case J:return Object(q.a)(Object(q.a)({},e),{},{registerRequest:!1,registerError:!0,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"});case H:return Object(q.a)(Object(q.a)({},e),{},{authRequest:!0});case W:return Object(q.a)(Object(q.a)({},e),{},{authRequest:!1,authError:!1,user:t.payload,isAuth:!0,errorText:""});case Q:return Object(q.a)(Object(q.a)({},e),{},{authRequest:!1,authError:!0,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438",isAuth:!1});case X:return Object(q.a)(Object(q.a)({},e),{},{logoutRequest:!0});case K:return Object(q.a)(Object(q.a)({},e),{},{logoutRequest:!1,logoutError:!1,isAuth:!1,user:null,errorText:""});case Y:return Object(q.a)(Object(q.a)({},e),{},{logoutRequest:!1,logoutError:!0,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0432\u044b\u0445\u043e\u0434\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"});case Z:return Object(q.a)(Object(q.a)({},e),{},{getUserRequest:!0});case $:return Object(q.a)(Object(q.a)({},e),{},{getUserRequest:!1,getUserError:!1,user:t.payload,isAuth:!0,errorText:""});case ee:return Object(q.a)(Object(q.a)({},e),{},{getUserRequest:!1,getUserError:!0,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",getUserLoaded:!1});case te:return Object(q.a)(Object(q.a)({},e),{},{userUpdateRequest:!0});case ne:return Object(q.a)(Object(q.a)({},e),{},{userUpdateRequest:!1,userUpdateError:!1,user:t.payload,errorText:""});case re:return Object(q.a)(Object(q.a)({},e),{},{userUpdateRequest:!1,userUpdateError:!0,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"});default:return e}}}),Pt={wsInit:ut,onOpen:jt,onClose:bt,onError:mt,onMessage:pt},Dt=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):It.c)(Object(It.a)(Rt.a,function(e){return function(t){var n=null;return function(r){return function(c){var a=e.wsInit,i=e.onOpen,s=e.onClose,o=e.onError,l=e.onMessage,d=t.dispatch,u=(t.getState,c.type),j=c.payload;u===a&&(n=new WebSocket(j)),n&&(n.onopen=function(e){return d({type:i,payload:e})},n.onerror=function(e){return d({type:o,payload:e})},n.onclose=function(e){return d({type:s,payload:e})},n.onmessage=function(e){return d({type:l,payload:JSON.parse(e.data)})}),r(c)}}}}(Pt))),Lt=Object(It.d)(At,Dt);i.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(_.a,{basename:"",children:Object(f.jsx)(o.a,{store:Lt,children:Object(f.jsx)(Et,{})})})}),document.getElementById("root")),kt()},22:function(e,t,n){e.exports={container:"Feed_container__3QtJB",list:"Feed_list__5Gq-1",ordersBlock:"Feed_ordersBlock__1NP46",ordersInfo:"Feed_ordersInfo__1eSRx",ordersNumbers:"Feed_ordersNumbers__1ZN9O",ordersReady:"Feed_ordersReady__2pyat",ordersInWork:"Feed_ordersInWork__14tzc",orderNumberReady:"Feed_orderNumberReady__2rn6T",largeNumber:"Feed_largeNumber__1EQPI"}},24:function(e,t,n){e.exports={card:"OrderCard_card__2-vaX",orderAndDate:"OrderCard_orderAndDate__ubTmP",price:"OrderCard_price__147ia",imgBlock:"OrderCard_imgBlock__vvrh3",img:"OrderCard_img__1w-nC",extra:"OrderCard_extra__3y1w-"}},27:function(e,t,n){e.exports={container:"IngredientDetails_container__1m4AM",image:"IngredientDetails_image__3cPoH",details:"IngredientDetails_details__1VpLp",detail:"IngredientDetails_detail__2pNcz"}},31:function(e,t,n){e.exports={header:"AppHeader_header__1DE8H",nav:"AppHeader_nav__1zVDo",navBtn:"AppHeader_navBtn__1lMrP",container:"AppHeader_container__3svZR"}},36:function(e,t,n){e.exports={container:"Ingredient_container__rDHJt",name:"Ingredient_name__gqM8h",price:"Ingredient_price__1vxAq",priceValue:"Ingredient_priceValue__14VTK"}},37:function(e,t,n){e.exports={block:"Login_block__1x_y_",form:"Login_form__L31_W",info:"Login_info__30PyK",link:"Login_link__1Y0oM"}},44:function(e,t,n){e.exports={container:"BurgerIngredients_container__1lO3t",nav:"BurgerIngredients_nav__3Va8N",navBtn:"BurgerIngredients_navBtn__JVW4q",navBtn_active:"BurgerIngredients_navBtn_active__qwcd8",ingredientsBlock:"BurgerIngredients_ingredientsBlock__151eR"}},45:function(e,t,n){e.exports={container:"OrderDetails_container__3oKxc",orderId:"OrderDetails_orderId__1XJji"}},46:function(e,t,n){e.exports={block:"Register_block__gbpZ0",form:"Register_form__1duFK",link:"Register_link__h5fO6",info:"Register_info__qoSVx"}},47:function(e,t,n){e.exports={block:"ForgotPassword_block__3heOO",form:"ForgotPassword_form__2ksKc",link:"ForgotPassword_link__26YIl",info:"ForgotPassword_info__1G1mt"}},48:function(e,t,n){e.exports={block:"ResetPassword_block__3r6sq",form:"ResetPassword_form__32PIB",link:"ResetPassword_link__u6d5e",info:"ResetPassword_info__2prJe"}},49:function(e,t,n){e.exports={container:"FeedDetails_container__2hN4W",list:"FeedDetails_list__1uNqX",img:"FeedDetails_img__3k_Mw"}},60:function(e,t,n){e.exports={modal:"Modal_modal__1qRWO",title:"Modal_title__1ErQm",close:"Modal_close__3bucL"}}},[[202,1,2]]]);
//# sourceMappingURL=main.ab618f1c.chunk.js.map